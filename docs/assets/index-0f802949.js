(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const U=()=>{},fe=e=>e;function q(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function x(e){return e.length===0?void 0:e.length===1?e[0]:e}function sn(e){return e==null?[]:Array.isArray(e)?e:typeof e=="string"||typeof e[Symbol.iterator]!="function"?[e]:[...e]}function on(e){return e!=null&&typeof e.next=="function"}function b(e){return e!=null&&typeof e.then=="function"}const ae="",k=Symbol.for("crank.Portal"),Pt=Symbol.for("crank.Copy"),kt=Symbol.for("crank.Raw"),St=Symbol.for("crank.Element");class Ze{constructor(t,n,r,s,i){this.tag=t,this.props=n,this.key=r,this.ref=s,this.static_=i}}Ze.prototype.$$typeof=St;function ln(e){return e!=null&&e.$$typeof===St}function te(e,t,...n){let r,s,i=!1;const o={};if(t!=null)for(const l in t)switch(l){case"crank-key":case"c-key":case"$key":t[l]!=null&&(r=t[l]);break;case"crank-ref":case"c-ref":case"$ref":typeof t[l]=="function"&&(s=t[l]);break;case"crank-static":case"c-static":case"$static":i=!!t[l];break;default:o[l]=t[l]}return n.length>1?o.children=n:n.length===1&&(o.children=n[0]),new Ze(e,o,r,s,i)}function Rt(e){if(!(typeof e=="boolean"||e==null)){{if(typeof e=="string"||ln(e))return e;if(typeof e[Symbol.iterator]=="function")return te(ae,null,e)}return e.toString()}}function Ke(e){const t=[];let n;for(let r=0;r<e.length;r++){const s=e[r];if(s)if(typeof s=="string")n=(n||"")+s;else if(!Array.isArray(s))n&&(t.push(n),n=void 0),t.push(s);else for(let i=0;i<s.length;i++){const o=s[i];o&&(typeof o=="string"?n=(n||"")+o:(n&&(t.push(n),n=void 0),t.push(o)))}}return n&&t.push(n),t}class Ge{constructor(t){this.el=t,this.ctx=void 0,this.children=void 0,this.value=void 0,this.cachedChildValues=void 0,this.fallbackValue=void 0,this.inflightValue=void 0,this.onNextValues=void 0}}function j(e){return typeof e.fallbackValue<"u"?typeof e.fallbackValue=="object"?j(e.fallbackValue):e.fallbackValue:e.el.tag===k?void 0:typeof e.el.tag!="function"&&e.el.tag!==ae?e.value:x(re(e))}function re(e){if(e.cachedChildValues)return q(e.cachedChildValues);const t=[],n=q(e.children);for(let i=0;i<n.length;i++){const o=n[i];o&&t.push(typeof o=="string"?o:j(o))}const r=Ke(t),s=e.el.tag;return(typeof s=="function"||s!==ae&&s!==kt)&&(e.cachedChildValues=x(r)),r}const an={create(){throw new Error("Not implemented")},hydrate(){throw new Error("Not implemented")},scope:fe,read:fe,text:fe,raw:fe,patch:U,arrange:U,dispose:U,flush:U},Fe=Symbol.for("crank.RendererImpl");class un{constructor(t){this.cache=new WeakMap,this[Fe]={...an,...t}}render(t,n,r){let s;const i=r&&r[P];typeof n=="object"&&n!==null&&(s=this.cache.get(n));let o;if(s===void 0)s=new Ge(te(k,{children:t,root:n})),s.value=n,s.ctx=i,typeof n=="object"&&n!==null&&t!=null&&this.cache.set(n,s);else{if(s.ctx!==i)throw new Error("Context mismatch");o=s.el.props,s.el=te(k,{children:t,root:n}),typeof n=="object"&&n!==null&&t==null&&this.cache.delete(n)}const l=this[Fe],a=se(l,n,s,i,l.scope(void 0,k,s.el.props),s,t,void 0);return b(a)?a.then(u=>ce(l,n,i,s,u,o)):ce(l,n,i,s,a,o)}hydrate(t,n,r){const s=this[Fe],i=r&&r[P];let o;if(o=this.cache.get(n),o!==void 0)return this.render(t,n,r);let l;o=new Ge(te(k,{children:t,root:n})),o.value=n,typeof n=="object"&&n!==null&&t!=null&&this.cache.set(n,o);const a=s.hydrate(k,n,{}),u=se(s,n,o,i,s.scope(void 0,k,o.el.props),o,t,a);return b(u)?u.then(d=>ce(s,n,i,o,d,l)):ce(s,n,i,o,u,l)}}function ce(e,t,n,r,s,i){return t!=null&&(e.arrange(k,t,r.el.props,s,i,q(r.cachedChildValues)),Be(e,t)),r.cachedChildValues=x(s),t==null&&ge(e,r,n,r),e.read(r.cachedChildValues)}function se(e,t,n,r,s,i,o,l){const a=q(i.children),u=[],d=sn(o),h=[];let p,w,V,M=!1,E,S=0,O=a.length;for(let g=0,X=d.length;g<X;g++){let f=S>=O?void 0:a[S],A=Rt(d[g]);{let F=typeof f=="object"?f.el.key:void 0,y=typeof A=="object"?A.key:void 0;if(y!==void 0&&V&&V.has(y)&&(console.error("Duplicate key",y),y=void 0),F===y)w!==void 0&&y!==void 0&&w.delete(y),S++;else if(w=w||fn(a,S),y===void 0){for(;f!==void 0&&F!==void 0;)S++,f=a[S],F=typeof f=="object"?f.el.key:void 0;S++}else f=w.get(y),f!==void 0&&w.delete(y),(V=V||new Set).add(y)}let I;if(typeof A=="object"){if(A.tag===Pt)I=rt(f);else{let y,nt=!1;if(typeof f=="object"&&f.el.tag===A.tag)y=f.el.props,f.el=A,A.static_&&(I=rt(f),nt=!0);else{typeof f=="object"&&(p=p||[]).push(f);const rn=f;f=new Ge(A),f.fallbackValue=rn}nt||(A.tag===kt?I=E?E.then(()=>st(e,f,s,y,l)):st(e,f,s,y,l):A.tag===ae?I=E?E.then(()=>it(e,t,n,r,s,f,l)):it(e,t,n,r,s,f,l):typeof A.tag=="function"?I=E?E.then(()=>at(e,t,n,r,s,f,y,l)):at(e,t,n,r,s,f,y,l):I=E?E.then(()=>ot(e,t,r,s,f,y,l)):ot(e,t,r,s,f,y,l))}const F=A.ref;b(I)?(M=!0,typeof F=="function"&&(I=I.then(y=>(F(e.read(y)),y))),l!==void 0&&(E=I)):typeof F=="function"&&F(e.read(I))}else typeof f=="object"&&(p=p||[]).push(f),typeof A=="string"?I=f=e.text(A,s,l):f=void 0;h[g]=I,u[g]=f}for(;S<O;S++){const g=a[S];typeof g=="object"&&typeof g.el.key>"u"&&(p=p||[]).push(g)}if(w!==void 0&&w.size>0&&(p=p||[]).push(...w.values()),i.children=x(u),M){let g=Promise.all(h).finally(()=>{if(p)for(let f=0;f<p.length;f++)ge(e,n,r,p[f])}),X;return g=Promise.race([g,new Promise(f=>X=f)]),i.onNextValues&&i.onNextValues(g),i.onNextValues=X,g.then(f=>(i.inflightValue=i.fallbackValue=void 0,Ke(f)))}else{if(p)for(let g=0;g<p.length;g++)ge(e,n,r,p[g]);return i.onNextValues&&(i.onNextValues(h),i.onNextValues=void 0),i.inflightValue=i.fallbackValue=void 0,Ke(h)}}function fn(e,t){const n=new Map;for(let r=t;r<e.length;r++){const s=e[r];typeof s=="object"&&typeof s.el.key<"u"&&n.set(s.el.key,s)}return n}function rt(e){if(typeof e!="object")return e;const t=typeof e.el.tag=="function"?e.ctx:void 0;return t&&t.f&H&&t.inflightValue?t.inflightValue:e.inflightValue?e.inflightValue:j(e)}function st(e,t,n,r,s){const i=t.el.props;return(!r||r.value!==i.value)&&(t.value=e.raw(i.value,n,s)),t.value}function it(e,t,n,r,s,i,o){const l=se(e,t,n,r,s,i,i.el.props.children,o);return b(l)?(i.inflightValue=l.then(a=>x(a)),i.inflightValue):x(l)}function ot(e,t,n,r,s,i,o){const l=s.el,a=l.tag;let u;l.tag===k?t=s.value=l.props.root:o!==void 0&&(u=o.children.shift()),r=e.scope(r,a,l.props);let d;u!=null&&typeof u!="string"&&(d=e.hydrate(a,u,l.props),d===void 0&&(u=void 0));const h=se(e,t,s,n,r,s,s.el.props.children,d);return b(h)?(s.inflightValue=h.then(p=>lt(e,r,s,p,i,u)),s.inflightValue):lt(e,r,s,h,i,u)}function lt(e,t,n,r,s,i){const o=n.el.tag;let l=n.value;i!=null&&(l=n.value=i);let a=n.el.props,u;if(o!==k){l==null&&(l=n.value=e.create(o,a,t));for(const d in{...s,...a}){const h=a[d];h===Pt?(u=u||new Set).add(d):d!=="children"&&e.patch(o,l,d,h,s&&s[d],t)}}if(u){a={...n.el.props};for(const d of u)a[d]=s&&s[d];n.el=new Ze(o,a,n.el.key,n.el.ref)}if(e.arrange(o,l,a,r,s,q(n.cachedChildValues)),n.cachedChildValues=x(r),o===k){Be(e,n.value);return}return l}function Be(e,t,n){if(e.flush(t),typeof t!="object"||t===null)return;const r=Q.get(t);if(r){if(n){const s=new Map;for(let[i,o]of r)hn(n,i)||(r.delete(i),s.set(i,o));s.size?Q.set(t,s):Q.delete(t)}else Q.delete(t);for(const[s,i]of r){const o=e.read(j(s.ret));for(const l of i)l(o)}}}function ge(e,t,n,r){if(typeof r.el.tag=="function")n=r.ctx,pe(n);else if(r.el.tag===k)t=r,e.arrange(k,t.value,t.el.props,[],t.el.props,q(t.cachedChildValues)),Be(e,t.value);else if(r.el.tag!==ae){if(Z(r.value)){const i=Nt(n,t);for(let o=0;o<i.length;o++){const l=i[o];r.value.removeEventListener(l.type,l.callback,l.options)}}e.dispose(r.el.tag,r.value,r.el.props),t=r}const s=q(r.children);for(let i=0;i<s.length;i++){const o=s[i];typeof o=="object"&&ge(e,t,n,o)}}const H=1,m=2,T=4,ie=8,W=16,oe=32,_=64,$=128,Y=256,J=512,Ue=1024,xe=2048,He=new WeakMap,me=new WeakMap,we=new WeakMap,Q=new WeakMap;class cn{constructor(t,n,r,s,i,o){this.f=0,this.owner=new dn(this),this.renderer=t,this.root=n,this.host=r,this.parent=s,this.scope=i,this.ret=o,this.iterator=void 0,this.inflightBlock=void 0,this.inflightValue=void 0,this.enqueuedBlock=void 0,this.enqueuedValue=void 0,this.onProps=void 0,this.onPropsRequested=void 0}}const P=Symbol.for("crank.ContextImpl");class dn{constructor(t){this[P]=t}get props(){return this[P].ret.el.props}get value(){return this[P].renderer.read(j(this[P].ret))}*[Symbol.iterator](){const t=this[P];try{for(t.f|=T;!(t.f&$);){if(t.f&W)throw new Error("Context iterated twice without a yield");t.f|=W,yield t.ret.el.props}}finally{t.f&=~T}}async*[Symbol.asyncIterator](){const t=this[P];if(t.f&Y)throw new Error("Use for...of in sync generator components");try{for(t.f|=ie;!(t.f&$);){if(t.f&W)throw new Error("Context iterated twice without a yield");if(t.f|=W,t.f&oe)t.f&=~oe,yield t.ret.el.props;else{const n=await new Promise(r=>t.onProps=r);if(t.f&$)break;yield n}t.onPropsRequested&&(t.onPropsRequested(),t.onPropsRequested=void 0)}}finally{t.f&=~ie,t.onPropsRequested&&(t.onPropsRequested(),t.onPropsRequested=void 0)}}refresh(){const t=this[P];if(t.f&$)return console.error("Component is unmounted"),t.renderer.read(void 0);if(t.f&m)return console.error("Component is already executing"),this.value;const n=be(t);return b(n)?n.then(r=>t.renderer.read(r)):t.renderer.read(n)}schedule(t){const n=this[P];let r=me.get(n);r||(r=new Set,me.set(n,r)),r.add(t)}flush(t){const n=this[P];if(typeof n.root!="object"||n.root===null)return;let r=Q.get(n.root);r||(r=new Map,Q.set(n.root,r));let s=r.get(n);s||(s=new Set,r.set(n,s)),s.add(t)}cleanup(t){const n=this[P];if(n.f&$){const s=n.renderer.read(j(n.ret));t(s);return}let r=we.get(n);r||(r=new Set,we.set(n,r)),r.add(t)}consume(t){for(let n=this[P].parent;n!==void 0;n=n.parent){const r=He.get(n);if(r&&r.has(t))return r.get(t)}}provide(t,n){const r=this[P];let s=He.get(r);s||(s=new Map,He.set(r,s)),s.set(t,n)}addEventListener(t,n,r){const s=this[P];let i;if(ht(n)){const a=B.get(s);a?i=a:(i=[],B.set(s,i))}else return;r=pt(r);let o;typeof n=="object"?o=()=>n.handleEvent.apply(n,arguments):o=n;const l={type:t,listener:n,callback:o,options:r};if(r.once&&(l.callback=function(){const a=i.indexOf(l);return a!==-1&&i.splice(a,1),o.apply(this,arguments)}),!i.some(a=>l.type===a.type&&l.listener===a.listener&&!l.options.capture==!a.options.capture)){i.push(l);for(const a of re(s.ret))Z(a)&&a.addEventListener(l.type,l.callback,l.options)}}removeEventListener(t,n,r){const s=this[P],i=B.get(s);if(i==null||!ht(n))return;const o=pt(r),l=i.findIndex(u=>u.type===t&&u.listener===n&&!u.options.capture==!o.capture);if(l===-1)return;const a=i[l];i.splice(l,1);for(const u of re(s.ret))Z(u)&&u.removeEventListener(a.type,a.callback,a.options)}dispatchEvent(t){const n=this[P],r=[];for(let o=n.parent;o!==void 0;o=o.parent)r.push(o);let s=!1;const i=t.stopImmediatePropagation;L(t,"stopImmediatePropagation",()=>(s=!0,i.call(t))),L(t,"target",n.owner);try{L(t,"eventPhase",mn);for(let o=r.length-1;o>=0;o--){const l=r[o],a=B.get(l);if(a){L(t,"currentTarget",l.owner);for(const u of a)if(u.type===t.type&&u.options.capture){try{u.callback.call(l.owner,t)}catch(d){console.error(d)}if(s)return!0}}if(t.cancelBubble)return!0}{L(t,"eventPhase",wn),L(t,"currentTarget",n.owner);const o=n.ret.el.props["on"+t.type];if(o!=null&&(o(t),s||t.cancelBubble))return!0;const l=B.get(n);if(l){for(const a of l)if(a.type===t.type){try{a.callback.call(n.owner,t)}catch(u){console.error(u)}if(s)return!0}if(t.cancelBubble)return!0}}if(t.bubbles){L(t,"eventPhase",bn);for(let o=0;o<r.length;o++){const l=r[o],a=B.get(l);if(a){L(t,"currentTarget",l.owner);for(const u of a)if(u.type===t.type&&!u.options.capture){try{u.callback.call(l.owner,t)}catch(d){console.error(d)}if(s)return!0}}if(t.cancelBubble)return!0}}}finally{return L(t,"eventPhase",gn),L(t,"currentTarget",null),!t.defaultPrevented}}}function hn(e,t){for(let n=t;n!==void 0;n=n.parent)if(n===e)return!0;return!1}function at(e,t,n,r,s,i,o,l){let a;if(o){if(a=i.ctx,a.f&m)return console.error("Component is already executing"),i.cachedChildValues}else a=i.ctx=new cn(e,t,n,r,s,i);return a.f|=H,be(a,l)}function K(e,t,n){if(e.f&$)return;if(e.f&_)return;t===void 0&&console.error("A component has returned or yielded undefined. If this was intentional, return or yield null instead.");let r;try{e.f|=m,r=se(e.renderer,e.root,e.host,e,e.scope,e.ret,Rt(t),n)}finally{e.f&=~m}return b(r)?(e.ret.inflightValue=r.then(s=>ut(e,s)),e.ret.inflightValue):ut(e,r)}function ut(e,t){if(e.f&$)return;const n=B.get(e);if(n&&n.length)for(let o=0;o<t.length;o++){const l=t[o];if(Z(l))for(let a=0;a<n.length;a++){const u=n[a];l.addEventListener(u.type,u.callback,u.options)}}const r=q(e.ret.cachedChildValues);let s=e.ret.cachedChildValues=x(t);if(e.f&Ue)e.f|=xe;else if(!(e.f&H)){if(!yn(r,t)){const o=Nt(e.parent,e.host);if(o.length)for(let d=0;d<t.length;d++){const h=t[d];if(Z(h))for(let p=0;p<o.length;p++){const w=o[p];h.addEventListener(w.type,w.callback,w.options)}}const l=e.host,a=q(l.cachedChildValues);pn(e,l);const u=re(l);e.renderer.arrange(l.el.tag,l.value,l.el.props,u,l.el.props,a)}Be(e.renderer,e.root,e)}const i=me.get(e);if(i){me.delete(e),e.f|=Ue;const o=e.renderer.read(s);for(const l of i)l(o);e.f&=~Ue,e.f&xe&&(e.f&=~xe,s=j(e.ret))}return e.f&=~H,s}function pn(e,t){for(let n=e.parent;n!==void 0&&n.host===t;n=n.parent)n.ret.cachedChildValues=void 0;t.cachedChildValues=void 0}function yn(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],s=t[n];if(r!==s)return!1}return!0}function be(e,t){if(e.f&J&&!(e.f&T)){if(t!==void 0)throw new Error("Hydration error");const n=e.f&ie&&!e.onProps;return ue(e),n?(e.inflightBlock==null&&(e.inflightBlock=new Promise(r=>e.onPropsRequested=r)),e.inflightBlock.then(()=>(e.inflightBlock=void 0,e.inflightValue))):e.inflightValue}else if(e.inflightBlock){if(!e.enqueuedBlock){if(t!==void 0)throw new Error("Hydration error");let n;e.enqueuedBlock=new Promise(r=>n=r),e.enqueuedValue=e.inflightBlock.then(()=>{try{const[r,s]=ct(e);return r&&n(r.finally(()=>ft(e))),s}catch(r){if(!(e.f&H)){if(!e.parent)throw r;return D(e.parent,r)}throw r}})}}else try{const[n,r]=ct(e,t);return n&&(e.inflightBlock=n.then(s=>s).finally(()=>ft(e)),e.inflightValue=r),r}catch(n){if(!(e.f&H)){if(!e.parent)throw n;return D(e.parent,n)}throw n}return e.enqueuedValue}function ft(e){e.f&J&&!(e.f&T)||(e.inflightBlock=e.enqueuedBlock,e.inflightValue=e.enqueuedValue,e.enqueuedBlock=void 0,e.enqueuedValue=void 0)}function ct(e,t){const n=e.ret,r=!e.iterator;if(r){ue(e),e.f|=m,At(e);let i;try{i=n.el.tag.call(e.owner,n.el.props)}catch(o){throw e.f|=_,o}finally{e.f&=~m}if(on(i))e.iterator=i;else if(b(i)){const o=i instanceof Promise?i:Promise.resolve(i),l=o.then(a=>K(e,a,t),a=>{throw e.f|=_,a});return[o.catch(U),l]}else return[void 0,K(e,i,t)]}else if(t!==void 0)throw new Error("Hydration error");let s;if(r){try{e.f|=m,s=e.iterator.next()}catch(i){throw e.f|=_,i}finally{e.f&=~m}b(s)?e.f|=J:e.f|=Y}if(e.f&Y){if(e.f&=~W,!r)try{e.f|=m,s=e.iterator.next(e.renderer.read(j(n)))}catch(l){throw e.f|=_,l}finally{e.f&=~m}if(b(s))throw new Error("Mixed generator component");s.done&&(e.f&=~Y,e.iterator=void 0);let i;try{i=K(e,s.value,t),b(i)&&(i=i.catch(l=>G(e,l)))}catch(l){i=G(e,l)}return[b(i)?i.catch(U):void 0,i]}else if(e.f&T){if(e.f&=~W,!r)try{e.f|=m,s=e.iterator.next(e.renderer.read(j(n)))}catch(l){throw e.f|=_,l}finally{e.f&=~m}if(!b(s))throw new Error("Mixed generator component");const i=s.catch(U),o=s.then(l=>{let a;e.f&T||dt(e,Promise.resolve(l),t);try{a=K(e,l.value,t),b(a)&&(a=a.catch(u=>G(e,u)))}catch(u){a=G(e,u)}return a},l=>{throw e.f|=_,l});return[i,o]}else return dt(e,s,t),[e.inflightBlock,e.inflightValue]}async function dt(e,t,n){let r=!1;try{for(;!r&&!(e.f&T);){let s;e.inflightValue=new Promise(a=>s=a),e.f&H&&e.inflightValue.catch(U);let i;try{i=await t}catch(a){r=!0,e.f|=_,s(Promise.reject(a));break}finally{e.f&=~W,e.f&ie||(e.f&=~oe)}r=!!i.done;let o;try{o=K(e,i.value,n),n=void 0,b(o)&&(o=o.catch(a=>G(e,a)))}catch(a){o=G(e,a)}finally{s(o)}let l;if(e.ret.inflightValue?(l=e.ret.inflightValue.then(a=>e.renderer.read(a)),l.catch(a=>{if(!(e.f&H)){if(!e.parent)throw a;return D(e.parent,a)}})):l=e.renderer.read(j(e.ret)),e.f&$)if(e.f&ie)try{e.f|=m,t=e.iterator.next(l)}finally{e.f&=~m}else{ye(e);break}else if(!r&&!(e.f&T))try{e.f|=m,t=e.iterator.next(l)}finally{e.f&=~m}}}finally{r&&(e.f&=~J,e.iterator=void 0)}}function ue(e){e.onProps?(e.onProps(e.ret.el.props),e.onProps=void 0,e.f&=~oe):e.f|=oe}function pe(e){At(e);const t=we.get(e);if(t){we.delete(e);const n=e.renderer.read(j(e.ret));for(const r of t)r(n)}if(e.f|=$,e.iterator)if(e.f&Y){let n;e.f&T&&(n=be(e)),b(n)?n.then(()=>{e.f&T?pe(e):ye(e)},r=>{if(!e.parent)throw r;return D(e.parent,r)}):e.f&T?pe(e):ye(e)}else e.f&J&&(e.f&T?be(e).then(()=>{e.f&T?pe(e):ye(e)},r=>{if(!e.parent)throw r;return D(e.parent,r)}):ue(e))}function ye(e){if(ue(e),e.iterator&&typeof e.iterator.return=="function")try{e.f|=m;const t=e.iterator.return();b(t)&&t.catch(n=>{if(!e.parent)throw n;return D(e.parent,n)})}finally{e.f&=~m}}const gn=0,mn=1,wn=2,bn=3,B=new WeakMap;function ht(e){return typeof e=="function"||e!==null&&typeof e=="object"&&typeof e.handleEvent=="function"}function pt(e){return typeof e=="boolean"?{capture:e}:e??{}}function Z(e){return e!=null&&typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"&&typeof e.dispatchEvent=="function"}function L(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!0})}function Nt(e,t){let n=[];for(;e!==void 0&&e.host===t;){const r=B.get(e);r&&(n=n.concat(r)),e=e.parent}return n}function At(e){const t=B.get(e);if(t&&t.length){for(const n of re(e.ret))if(Z(n))for(const r of t)n.removeEventListener(r.type,r.callback,r.options);t.length=0}}function G(e,t){if(!e.iterator||typeof e.iterator.throw!="function")throw t;ue(e);let n;try{e.f|=m,n=e.iterator.throw(t)}catch(r){throw e.f|=_,r}finally{e.f&=~m}return b(n)?n.then(r=>(r.done&&(e.f&=~J,e.iterator=void 0),K(e,r.value)),r=>{throw e.f|=_,r}):(n.done&&(e.f&=~Y,e.f&=~J,e.iterator=void 0),K(e,n.value))}function D(e,t){let n;try{n=G(e,t)}catch(r){if(!e.parent)throw r;return D(e.parent,r)}return b(n)?n.catch(r=>{if(!e.parent)throw r;return D(e.parent,r)}):n}function It(e,t,n){return te(e,{...t,key:n})}const En="",c=It,Tt=It,De="http://www.w3.org/2000/svg",vn={scope(e,t){switch(t){case k:case"foreignObject":e=void 0;break;case"svg":e=De;break}return e},create(e,t,n){if(typeof e!="string")throw new Error(`Unknown tag: ${e.toString()}`);return e.toLowerCase()==="svg"&&(n=De),n?document.createElementNS(n,e):document.createElement(e)},hydrate(e,t,n){if(typeof e!="string"&&e!==k)throw new Error(`Unknown tag: ${e.toString()}`);if(typeof e=="string"&&e.toUpperCase()!==t.tagName)return;const r=[];for(let s=0;s<t.childNodes.length;s++){const i=t.childNodes[s];i.nodeType===Node.TEXT_NODE?r.push(i.data):i.nodeType===Node.ELEMENT_NODE&&r.push(i)}return{props:n,children:r}},patch(e,t,n,r,s,i){const o=i===De;switch(n){case"style":{const l=t.style;if(l==null)t.setAttribute("style",r);else if(r==null||r===!1)t.removeAttribute("style");else if(r===!0)t.setAttribute("style","");else if(typeof r=="string")l.cssText!==r&&(l.cssText=r);else{typeof s=="string"&&(l.cssText="");for(const a in{...s,...r}){const u=r&&r[a];u==null?l.removeProperty(a):l.getPropertyValue(a)!==u&&l.setProperty(a,u)}}break}case"class":case"className":r===!0?t.setAttribute("class",""):r==null?t.removeAttribute("class"):o?t.getAttribute("class")!==r&&t.setAttribute("class",r):t.className!==r&&(t.className=r);break;case"innerHTML":r!==s&&(t.innerHTML=r);break;default:{if(n in t&&!(typeof r=="string"&&typeof t[n]=="boolean")){let l=t;do if(Object.prototype.hasOwnProperty.call(l,n))break;while(l=Object.getPrototypeOf(l));const a=Object.getOwnPropertyDescriptor(l,n);if(a!=null&&(a.writable===!0||a.set!==void 0)){(t[n]!==r||s===void 0)&&(t[n]=r);return}}if(r===!0)r="";else if(r==null||r===!1){t.removeAttribute(n);return}t.getAttribute(n)!==r&&t.setAttribute(n,r)}}},arrange(e,t,n,r,s,i){if(e===k&&(t==null||typeof t.nodeType!="number"))throw new TypeError(`Portal root is not a node. Received: ${JSON.stringify(t&&t.toString())}`);if(!("innerHTML"in n)&&("children"in n||i&&i.length))if(r.length===0)t.textContent="";else{let o=t.firstChild,l=0;for(;o!==null&&l<r.length;){const a=r[l];if(o===a)o=o.nextSibling,l++;else if(typeof a=="string")o.nodeType===Node.TEXT_NODE?(o.data!==a&&(o.data=a),o=o.nextSibling):t.insertBefore(document.createTextNode(a),o),l++;else if(o.nodeType===Node.TEXT_NODE){const u=o.nextSibling;t.removeChild(o),o=u}else if(t.insertBefore(a,o),l++,o!==r[l]){const u=o.nextSibling;t.removeChild(o),o=u}}for(;o!==null;){const a=o.nextSibling;t.removeChild(o),o=a}for(;l<r.length;l++){const a=r[l];t.appendChild(typeof a=="string"?document.createTextNode(a):a)}}},text(e,t,n){if(n!=null){let r=n.children.shift();typeof r!="string"||!r.startsWith(e)||e.length<r.length&&(r=r.slice(e.length),n.children.unshift(r))}return e},raw(e,t,n){let r;if(typeof e=="string"){const s=t==null?document.createElement("div"):document.createElementNS(t,"svg");s.innerHTML=e,s.childNodes.length===0?r=void 0:s.childNodes.length===1?r=s.childNodes[0]:r=Array.from(s.childNodes)}else r=e;if(n!=null)if(Array.isArray(r))for(let s=0;s<r.length;s++){const i=r[s];typeof i!="string"&&(i.nodeType===Node.ELEMENT_NODE||i.nodeType===Node.TEXT_NODE)&&n.children.shift()}else r!=null&&typeof r!="string"&&(r.nodeType===Node.ELEMENT_NODE||r.nodeType===Node.TEXT_NODE)&&n.children.shift();return r}};class Pn extends un{constructor(){super(vn)}render(t,n,r){return yt(n),super.render(t,n,r)}hydrate(t,n,r){return yt(n),super.hydrate(t,n,r)}}function yt(e){if(e===null||typeof e=="object"&&typeof e.nodeType!="number")throw new TypeError(`Render root is not a node. Received: ${JSON.stringify(e&&e.toString())}`)}const kn=new Pn;const z="4.11.1";class C extends Error{}class R extends C{constructor(t,n,r,s){super(`${t} ${R.makeMessage(n,r)}`),this.status=t,this.headers=s;const i=n;this.error=i,this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(t,n){return t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n||"status code (no body)"}static generate(t,n,r,s){if(!t)return new $e({cause:Ye(n)});const i=n==null?void 0:n.error;return t===400?new Ct(t,i,r,s):t===401?new jt(t,i,r,s):t===403?new Vt(t,i,r,s):t===404?new Lt(t,i,r,s):t===409?new _t(t,i,r,s):t===422?new Ot(t,i,r,s):t===429?new Bt(t,i,r,s):t>=500?new $t(t,i,r,s):new R(t,i,r,s)}}class Je extends R{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class $e extends R{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class et extends $e{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Ct extends R{constructor(){super(...arguments),this.status=400}}class jt extends R{constructor(){super(...arguments),this.status=401}}class Vt extends R{constructor(){super(...arguments),this.status=403}}class Lt extends R{constructor(){super(...arguments),this.status=404}}class _t extends R{constructor(){super(...arguments),this.status=409}}class Ot extends R{constructor(){super(...arguments),this.status=422}}class Bt extends R{constructor(){super(...arguments),this.status=429}}class $t extends R{}class Sn{constructor(t,n){this.response=t,this.controller=n,this.decoder=new Rn}async*iterMessages(){if(!this.response.body)throw this.controller.abort(),new C("Attempted to iterate over a response with no body");const t=new ee,n=An(this.response.body);for await(const r of n)for(const s of t.decode(r)){const i=this.decoder.decode(s);i&&(yield i)}for(const r of t.flush()){const s=this.decoder.decode(r);s&&(yield s)}}async*[Symbol.asyncIterator](){let t=!1;try{for await(const n of this.iterMessages())if(!t){if(n.data.startsWith("[DONE]")){t=!0;continue}if(n.event===null)try{yield JSON.parse(n.data)}catch(r){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),r}}t=!0}catch(n){if(n instanceof Error&&n.name==="AbortError")return;throw n}finally{t||this.controller.abort()}}}class Rn{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=Nn(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}class ee{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let n=this.decodeText(t);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=ee.NEWLINE_CHARS.has(n[n.length-1]||"");let s=n.split(ee.NEWLINE_REGEXP);return s.length===1&&!r?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),r||(this.buffer=[s.pop()||""]),s)}decodeText(t){var n;if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new C(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return(n=this.textDecoder)!==null&&n!==void 0||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new C(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new C("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}ee.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);ee.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function Nn(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function An(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}let gt=!1,ne,qt,Mt,ze,Ft,Ut,xt,Ht;function In(e,t={auto:!1}){if(gt)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(ne)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${ne}'\``);gt=t.auto,ne=e.kind,qt=e.fetch,e.Request,e.Response,e.Headers,Mt=e.FormData,e.Blob,ze=e.File,Ft=e.getMultipartRequestOptions,Ut=e.getDefaultAgent,xt=e.fileFromPath,Ht=e.isFsReadStream}class Tn{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function Cn({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,i;try{n=fetch,r=Request,s=Response,i=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,l)=>({...l,body:new Tn(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}ne||In(Cn(),{auto:!0});const Dt=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",jn=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Xt(e),Xt=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",Vn=e=>jn(e)||Dt(e)||Ht(e);async function Wt(e,t,n={}){var r,s,i;if(e=await e,Dt(e)){const l=await e.blob();return t||(t=(r=new URL(e.url).pathname.split(/[\\/]/).pop())!==null&&r!==void 0?r:"unknown_file"),new ze([l],t,n)}const o=await Ln(e);if(t||(t=(s=On(e))!==null&&s!==void 0?s:"unknown_file"),!n.type){const l=(i=o[0])===null||i===void 0?void 0:i.type;typeof l=="string"&&(n={...n,type:l})}return new ze(o,t,n)}async function Ln(e){var t;let n=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)n.push(e);else if(Xt(e))n.push(await e.arrayBuffer());else if(Bn(e))for await(const r of e)n.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name}; props: ${_n(e)}`);return n}function _n(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function On(e){var t;return Xe(e.name)||Xe(e.filename)||((t=Xe(e.path))===null||t===void 0?void 0:t.split(/[\\/]/).pop())}const Xe=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},Bn=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",mt=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",le=async e=>{const t=await $n(e.body);return Ft(t,e)},$n=async e=>{const t=new Mt;return await Promise.all(Object.entries(e||{}).map(([n,r])=>Qe(t,n,r))),t},Qe=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(Vn(n)){const r=await Wt(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Qe(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Qe(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var qn=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},Mn=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},de;const Fn=2;async function Kt(e){const{response:t}=e;if(e.options.stream)return new Sn(t,e.controller);const n=t.headers.get("content-type");if(n!=null&&n.includes("application/json")){const s=await t.json();return Ee("response",t.status,t.url,t.headers,s),s}const r=await t.text();return Ee("response",t.status,t.url,t.headers,r),r}class qe extends Promise{constructor(t,n=Kt){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new qe(this.responsePromise,async n=>t(await this.parseResponse(n)))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class Un{constructor({baseURL:t,maxRetries:n,timeout:r=6e5,httpAgent:s,fetch:i}){this.baseURL=t,this.maxRetries=We("maxRetries",n??Fn),this.timeout=We("timeout",r),this.httpAgent=s,this.fetch=i??qt}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Kn(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Yn()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(s=>({method:t,path:n,...s})))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}return null}buildRequest(t){var n,r,s,i,o,l;const{method:a,path:u,query:d,headers:h={}}=t,p=mt(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,w=this.calculateContentLength(p),V=this.buildURL(u,d);"timeout"in t&&We("timeout",t.timeout);const M=(n=t.timeout)!==null&&n!==void 0?n:this.timeout,E=(s=(r=t.httpAgent)!==null&&r!==void 0?r:this.httpAgent)!==null&&s!==void 0?s:Ut(V),S=M+1e3;typeof((i=E==null?void 0:E.options)===null||i===void 0?void 0:i.timeout)=="number"&&S>((o=E.options.timeout)!==null&&o!==void 0?o:0)&&(E.options.timeout=S),this.idempotencyHeader&&a!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),h[this.idempotencyHeader]=t.idempotencyKey);const O={...w&&{"Content-Length":w},...this.defaultHeaders(t),...h};mt(t.body)&&ne!=="node"&&delete O["Content-Type"],Object.keys(O).forEach(X=>O[X]===null&&delete O[X]);const g={method:a,...p&&{body:p},headers:O,...E&&{agent:E},signal:(l=t.signal)!==null&&l!==void 0?l:null};return this.validateHeaders(O,h),{req:g,url:V,timeout:M}}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,s){return R.generate(t,n,r,s)}request(t,n=null){return new qe(this.makeRequest(t,n))}async makeRequest(t,n){var r,s,i;const o=await t;n==null&&(n=(r=o.maxRetries)!==null&&r!==void 0?r:this.maxRetries);const{req:l,url:a,timeout:u}=this.buildRequest(o);if(await this.prepareRequest(l,{url:a,options:o}),Ee("request",a,o,l.headers),!((s=o.signal)===null||s===void 0)&&s.aborted)throw new Je;const d=new AbortController,h=await this.fetchWithTimeout(a,l,u,d).catch(Ye);if(h instanceof Error){if(!((i=o.signal)===null||i===void 0)&&i.aborted)throw new Je;if(n)return this.retryRequest(o,n);throw h.name==="AbortError"?new et:new $e({cause:h})}const p=Hn(h.headers);if(!h.ok){if(n&&this.shouldRetry(h))return this.retryRequest(o,n,p);const w=await h.text().catch(S=>Ye(S).message),V=Gn(w),M=V?void 0:w;throw Ee("response",h.status,a,p,M),this.makeStatusError(h.status,V,M,p)}return{response:h,options:o,controller:d}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new xn(this,r,t)}buildURL(t,n){const r=zn(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return zt(s)||(n={...s,...n}),n&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new C(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,s){const{signal:i,...o}=n||{};i&&i.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),r);return this.getRequestClient().fetch.call(void 0,t,{signal:s.signal,...o}).finally(()=>{clearTimeout(l)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){var s;n-=1;let i;const o=r==null?void 0:r["retry-after"];if(o){const l=parseInt(o);Number.isNaN(l)?i=Date.parse(o)-Date.now():i=l*1e3}if(!i||!Number.isInteger(i)||i<=0||i>60*1e3){const l=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Jt(i),this.makeRequest(t,n)}calculateDefaultRetryTimeoutMillis(t,n){const i=n-t,o=Math.min(.5*Math.pow(i-1,2),2),l=Math.random()-.5;return(o+l)*1e3}getUserAgent(){return`${this.constructor.name}/JS ${z}`}}class Gt{constructor(t,n,r,s){de.set(this,void 0),qn(this,de,t,"f"),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new C("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t)n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[s,i]of r)t.url.searchParams.set(s,i);n.query=void 0,n.path=t.url.toString()}return await Mn(this,de,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(de=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class xn extends qe{constructor(t,n,r){super(n,async s=>new r(t,s.response,await Kt(s),s.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const Hn=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),Dn={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0},wt=e=>typeof e=="object"&&e!==null&&!zt(e)&&Object.keys(e).every(t=>Qn(Dn,t)),Xn=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":Et(Deno.build.os),"X-Stainless-Arch":bt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":Et(process.platform),"X-Stainless-Arch":bt(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=Wn();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Wn(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:t,version:`${s}.${i}.${o}`}}}return null}const bt=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Et=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let he;const Kn=()=>he??(he=Xn()),Gn=e=>{try{return JSON.parse(e)}catch{return}},Jn=new RegExp("^(?:[a-z]+:)?//","i"),zn=e=>Jn.test(e),Jt=e=>new Promise(t=>setTimeout(t,e)),We=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new C(`${e} must be an integer`);if(t<0)throw new C(`${e} must be a positive integer`);return t},Ye=e=>e instanceof Error?e:new Error(e),vt=e=>{var t,n,r,s;if(typeof process<"u")return(n=(t=process.env)===null||t===void 0?void 0:t[e])!==null&&n!==void 0?n:void 0;if(typeof Deno<"u")return(s=(r=Deno.env)===null||r===void 0?void 0:r.get)===null||s===void 0?void 0:s.call(r,e)};function zt(e){if(!e)return!0;for(const t in e)return!1;return!0}function Qn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ee(e,...t){typeof process<"u"&&process.env.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const Yn=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),Zn=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class Me extends Gt{constructor(t,n,r,s){super(t,n,r,s),this.object=r.object,this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class tt extends Gt{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var t,n;if(!(!((t=this.data)===null||t===void 0)&&t.length))return null;const r=(n=this.data[this.data.length-1])===null||n===void 0?void 0:n.id;return r?{params:{after:r}}:null}}class N{constructor(t){this.client=t,this.get=t.get.bind(t),this.post=t.post.bind(t),this.patch=t.patch.bind(t),this.put=t.put.bind(t),this.delete=t.delete.bind(t),this.getAPIList=t.getAPIList.bind(t)}}class ve extends N{create(t,n){return this.post("/audio/transcriptions",le({body:t,...n}))}}ve||(ve={});class Pe extends N{create(t,n){return this.post("/audio/translations",le({body:t,...n}))}}Pe||(Pe={});class ke extends N{constructor(){super(...arguments),this.transcriptions=new ve(this.client),this.translations=new Pe(this.client)}}(function(e){e.Transcriptions=ve,e.Translations=Pe})(ke||(ke={}));let Se=class extends N{create(t,n){var r;return this.post("/chat/completions",{body:t,...n,stream:(r=t.stream)!==null&&r!==void 0?r:!1})}};Se||(Se={});class Re extends N{constructor(){super(...arguments),this.completions=new Se(this.client)}}(function(e){e.Completions=Se})(Re||(Re={}));class Ne extends N{create(t,n){var r;return this.post("/completions",{body:t,...n,stream:(r=t.stream)!==null&&r!==void 0?r:!1})}}Ne||(Ne={});class Ae extends N{create(t,n){return this.post("/embeddings",{body:t,...n})}}Ae||(Ae={});class Ie extends N{create(t,n){return this.post("/edits",{body:t,...n})}}Ie||(Ie={});class Te extends N{create(t,n){return this.post("/files",le({body:t,...n}))}retrieve(t,n){return this.get(`/files/${t}`,n)}list(t){return this.getAPIList("/files",Qt,t)}del(t,n){return this.delete(`/files/${t}`,n)}retrieveContent(t,n){return this.get(`/files/${t}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(t);for(;!o.status||!s.has(o.status);)if(await Jt(n),o=await this.retrieve(t),Date.now()-i>r)throw new et({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return o}}class Qt extends Me{}Te||(Te={});class Ce extends N{create(t,n){return this.post("/fine-tunes",{body:t,...n})}retrieve(t,n){return this.get(`/fine-tunes/${t}`,n)}list(t){return this.getAPIList("/fine-tunes",Yt,t)}cancel(t,n){return this.post(`/fine-tunes/${t}/cancel`,n)}listEvents(t,n,r){var s;return this.get(`/fine-tunes/${t}/events`,{query:n,timeout:864e5,...r,stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1})}}class Yt extends Me{}Ce||(Ce={});class je extends N{create(t,n){return this.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return wt(t)?this.list({},t):this.getAPIList("/fine_tuning/jobs",Zt,{query:t,...n})}cancel(t,n){return this.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return wt(n)?this.listEvents(t,{},n):this.getAPIList(`/fine_tuning/jobs/${t}/events`,en,{query:n,...r})}}class Zt extends tt{}class en extends tt{}je||(je={});class Ve extends N{constructor(){super(...arguments),this.jobs=new je(this.client)}}(function(e){e.Jobs=je,e.FineTuningJobsPage=Zt,e.FineTuningJobEventsPage=en})(Ve||(Ve={}));class Le extends N{createVariation(t,n){return this.post("/images/variations",le({body:t,...n}))}edit(t,n){return this.post("/images/edits",le({body:t,...n}))}generate(t,n){return this.post("/images/generations",{body:t,...n})}}Le||(Le={});class _e extends N{retrieve(t,n){return this.get(`/models/${t}`,n)}list(t){return this.getAPIList("/models",tn,t)}del(t,n){return this.delete(`/models/${t}`,n)}}class tn extends Me{}_e||(_e={});class Oe extends N{create(t,n){return this.post("/moderations",{body:t,...n})}}Oe||(Oe={});var nn;class v extends Un{constructor(t){var n,r,s,{apiKey:i=vt("OPENAI_API_KEY"),organization:o=(n=vt("OPENAI_ORG_ID"))!==null&&n!==void 0?n:null,...l}=t===void 0?{}:t;if(i===void 0)throw new C("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' }).");const a={apiKey:i,organization:o,...l,baseURL:(r=l.baseURL)!==null&&r!==void 0?r:"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&Zn())throw new C(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:(s=a.timeout)!==null&&s!==void 0?s:6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new Ne(this),this.chat=new Re(this),this.edits=new Ie(this),this.embeddings=new Ae(this),this.files=new Te(this),this.images=new Le(this),this.audio=new ke(this),this.moderations=new Oe(this),this.models=new _e(this),this.fineTuning=new Ve(this),this.fineTunes=new Ce(this),this._options=a,this.apiKey=i,this.organization=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}nn=v;v.OpenAI=nn;v.OpenAIError=C;v.APIError=R;v.APIConnectionError=$e;v.APIConnectionTimeoutError=et;v.APIUserAbortError=Je;v.NotFoundError=Lt;v.ConflictError=_t;v.RateLimitError=Bt;v.BadRequestError=Ct;v.AuthenticationError=jt;v.InternalServerError=$t;v.PermissionDeniedError=Vt;v.UnprocessableEntityError=Ot;(function(e){e.toFile=Wt,e.fileFromPath=xt,e.Page=Me,e.CursorPage=tt,e.Completions=Ne,e.Chat=Re,e.Edits=Ie,e.Embeddings=Ae,e.Files=Te,e.FileObjectsPage=Qt,e.Images=Le,e.Audio=ke,e.Moderations=Oe,e.Models=_e,e.ModelsPage=tn,e.FineTuning=Ve,e.FineTunes=Ce,e.FineTunesPage=Yt})(v||(v={}));const er=v,tr=`
You represent an artwork by the artist Sophie Dupont. The piece is about breath. Users can tell you how they feel and you will give them a response that matches their emotions.

Here are some examples:

User: I'm feeling very sad

Response: Imagine a color - the first that comes to you. Inhale through the nose this color bright and clear as you lift and press your belly into your hands. Do so until your fingers move away from each other and no longer touch. Exhale through your mouth now in a different color equal to the feeling of sadness, feeling your belly fall and your fingers touch again. Visualize you release your feeling together with the color and your breath.
Repeat this as many times you need until you feel a little bit or a lot brighter.

User: I feel depressed

Response: Please place your hands on your hips. Inhale and twist to the left side and exhale twist to the right side. Visualize the sun is shining on you as if you were standing in your own private sunbeam spotlight. Mentally inside yourself say LIGHT when you twist left and STAR when you twist right. Imagine the depression being shaken away and smile. 

User: I have no energy

Response: Exhale fully. Imagine you stand in the front of the ocean with your toes in the fresh water. Imagine the waves. When the waves come to the shore you take a deep inhalation though the nose letting the waves wash over you. On your exhale through the mouth visualize the waves takes away all your worries pain and suffering. Leaving you refreshed clear sighted and with a warm bright heart shining inside and for you.
`;async function nr(e){const t=localStorage.getItem("openai-token")||"",n=new er({apiKey:t,dangerouslyAllowBrowser:!0}),r=[{content:tr,role:"system"},{content:e,role:"user"}];return await n.chat.completions.create({model:"gpt-3.5-turbo-0613",messages:r,stream:!0})}async function*rr({stream:e,onProceed:t}){let n="";for await(const r of e){const s=r.choices[0].delta.content;console.log("New Part: ",s),s&&(n+=s),yield c("div",{class:"flex h-screen flex-col p-8",children:c("div",{className:"flex h-full w-full items-start justify-start",children:c("div",{className:"flex h-full w-full flex-col items-start justify-start",children:c("div",{className:"",children:n.split(" ").map(i=>c("span",{class:"enter mx-2",children:i}))})})})})}await new Promise(r=>setTimeout(r,3e3)),yield c("div",{class:"flex h-screen flex-col p-8",children:c("div",{className:"flex h-full w-full items-start justify-start",children:c("div",{className:"flex h-full w-full flex-col items-start justify-start",children:c("div",{className:"",children:n.split(" ").map(r=>c("span",{class:"breathing mx-2",children:r}))})})})}),await new Promise(r=>setTimeout(r,1e4)),yield c("div",{class:"flex h-screen flex-col p-8",children:c("div",{className:"flex h-full w-full items-start justify-start",children:c("div",{className:"flex h-full w-full flex-col items-start justify-start",children:c("div",{className:"",children:n.split(" ").map(r=>c("span",{class:"exit mx-2",children:r}))})})})}),await new Promise(r=>setTimeout(r,3e3)),t(),yield null}function*sr(){localStorage.getItem("openai-token")||(setTimeout(()=>{console.log('Token not found. Redirecting to "/token"'),history.pushState({},"","/sophie-breath/token"),window.dispatchEvent(new PopStateEvent("popstate"))},100),yield null);let e;const t=async n=>{n.preventDefault();const r=document.getElementById("query").value;await this.refresh(),console.log("Sending query"),e=await nr(r),await this.refresh()};for(;;)yield c("div",{class:"flex h-screen flex-col",children:c("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:c("div",{className:"flex h-full w-full flex-col items-center justify-center",children:Tt("form",{onsubmit:t,className:"flex w-full flex-row items-center justify-center",children:[c("input",{id:"query",type:"text",placeholder:"Tell me how you're feeling...",className:"m-2 w-full max-w-screen-md rounded-md border-2 border-gray-500 p-2"}),c("button",{type:"submit",className:"m-2 rounded-md border-2 border-gray-500 p-2",children:"Go"})]})})})}),yield c("div",{class:"flex h-screen flex-col",children:c("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:c("div",{className:"flex h-full w-full flex-col items-center justify-center",children:c("div",{className:"flex w-full flex-row items-center justify-center",children:c("span",{className:"breathing",children:"..."})})})})}),setTimeout(()=>this.refresh(),1e5),yield c(rr,{stream:e,onProceed:()=>this.refresh()})}function ir(){const e=localStorage.getItem("openai-token")||"";return c("div",{class:"flex h-screen flex-col",children:c("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:Tt("div",{className:"flex h-full w-full flex-col items-center justify-center",children:[c("div",{className:"flex w-full flex-row items-center justify-center",children:c("input",{type:"text",value:e,oninput:r=>{const s=r.target;localStorage.setItem("openai-token",s.value)},placeholder:"OpenAI API Token",className:"m-2 w-full max-w-screen-md rounded-md border-2 border-gray-500 p-2"})}),c("div",{className:"flex flex-row",children:c("button",{onclick:()=>{history.pushState({},"","/sophie-breath/"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"m-2 rounded-md border-2 border-gray-500 p-2",children:"Continue"})})]})})})}const or={"/":sr,"/token":ir};function*lr(){const e=()=>this.refresh();window.addEventListener("popstate",e);try{for(;;){const t="/sophie-breath",n=window.location.pathname.substring(t.length)||"/";console.log("Rendering: ",n);const r=or[n];yield c("div",{class:"flex h-screen flex-col",children:c(r,{x:Math.random()})})}}finally{console.log("unmount"),window.removeEventListener("popstate",e)}}const ar=()=>c(En,{children:c(lr,{})});(async()=>await kn.render(c("div",{id:"root",children:c(ar,{})}),document.body))();
