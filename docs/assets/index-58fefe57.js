(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const F=()=>{},ce=e=>e;function B(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function U(e){return e.length===0?void 0:e.length===1?e[0]:e}function fn(e){return e==null?[]:Array.isArray(e)?e:typeof e=="string"||typeof e[Symbol.iterator]!="function"?[e]:[...e]}function cn(e){return e!=null&&typeof e.next=="function"}function b(e){return e!=null&&typeof e.then=="function"}const ue="",k=Symbol.for("crank.Portal"),It=Symbol.for("crank.Copy"),At=Symbol.for("crank.Raw"),Nt=Symbol.for("crank.Element");class tt{constructor(t,n,r,s,i){this.tag=t,this.props=n,this.key=r,this.ref=s,this.static_=i}}tt.prototype.$$typeof=Nt;function dn(e){return e!=null&&e.$$typeof===Nt}function ne(e,t,...n){let r,s,i=!1;const o={};if(t!=null)for(const l in t)switch(l){case"crank-key":case"c-key":case"$key":t[l]!=null&&(r=t[l]);break;case"crank-ref":case"c-ref":case"$ref":typeof t[l]=="function"&&(s=t[l]);break;case"crank-static":case"c-static":case"$static":i=!!t[l];break;default:o[l]=t[l]}return n.length>1?o.children=n:n.length===1&&(o.children=n[0]),new tt(e,o,r,s,i)}function Tt(e){if(!(typeof e=="boolean"||e==null)){{if(typeof e=="string"||dn(e))return e;if(typeof e[Symbol.iterator]=="function")return ne(ue,null,e)}return e.toString()}}function Je(e){const t=[];let n;for(let r=0;r<e.length;r++){const s=e[r];if(s)if(typeof s=="string")n=(n||"")+s;else if(!Array.isArray(s))n&&(t.push(n),n=void 0),t.push(s);else for(let i=0;i<s.length;i++){const o=s[i];o&&(typeof o=="string"?n=(n||"")+o:(n&&(t.push(n),n=void 0),t.push(o)))}}return n&&t.push(n),t}class ze{constructor(t){this.el=t,this.ctx=void 0,this.children=void 0,this.value=void 0,this.cachedChildValues=void 0,this.fallbackValue=void 0,this.inflightValue=void 0,this.onNextValues=void 0}}function j(e){return typeof e.fallbackValue<"u"?typeof e.fallbackValue=="object"?j(e.fallbackValue):e.fallbackValue:e.el.tag===k?void 0:typeof e.el.tag!="function"&&e.el.tag!==ue?e.value:U(se(e))}function se(e){if(e.cachedChildValues)return B(e.cachedChildValues);const t=[],n=B(e.children);for(let i=0;i<n.length;i++){const o=n[i];o&&t.push(typeof o=="string"?o:j(o))}const r=Je(t),s=e.el.tag;return(typeof s=="function"||s!==ue&&s!==At)&&(e.cachedChildValues=U(r)),r}const hn={create(){throw new Error("Not implemented")},hydrate(){throw new Error("Not implemented")},scope:ce,read:ce,text:ce,raw:ce,patch:F,arrange:F,dispose:F,flush:F},Ue=Symbol.for("crank.RendererImpl");class pn{constructor(t){this.cache=new WeakMap,this[Ue]={...hn,...t}}render(t,n,r){let s;const i=r&&r[E];typeof n=="object"&&n!==null&&(s=this.cache.get(n));let o;if(s===void 0)s=new ze(ne(k,{children:t,root:n})),s.value=n,s.ctx=i,typeof n=="object"&&n!==null&&t!=null&&this.cache.set(n,s);else{if(s.ctx!==i)throw new Error("Context mismatch");o=s.el.props,s.el=ne(k,{children:t,root:n}),typeof n=="object"&&n!==null&&t==null&&this.cache.delete(n)}const l=this[Ue],a=ie(l,n,s,i,l.scope(void 0,k,s.el.props),s,t,void 0);return b(a)?a.then(u=>de(l,n,i,s,u,o)):de(l,n,i,s,a,o)}hydrate(t,n,r){const s=this[Ue],i=r&&r[E];let o;if(o=this.cache.get(n),o!==void 0)return this.render(t,n,r);let l;o=new ze(ne(k,{children:t,root:n})),o.value=n,typeof n=="object"&&n!==null&&t!=null&&this.cache.set(n,o);const a=s.hydrate(k,n,{}),u=ie(s,n,o,i,s.scope(void 0,k,o.el.props),o,t,a);return b(u)?u.then(h=>de(s,n,i,o,h,l)):de(s,n,i,o,u,l)}}function de(e,t,n,r,s,i){return t!=null&&(e.arrange(k,t,r.el.props,s,i,B(r.cachedChildValues)),Be(e,t)),r.cachedChildValues=U(s),t==null&&we(e,r,n,r),e.read(r.cachedChildValues)}function ie(e,t,n,r,s,i,o,l){const a=B(i.children),u=[],h=fn(o),d=[];let p,w,L,x=!1,P,S=0,_=a.length;for(let g=0,X=h.length;g<X;g++){let c=S>=_?void 0:a[S],A=Tt(h[g]);{let M=typeof c=="object"?c.el.key:void 0,y=typeof A=="object"?A.key:void 0;if(y!==void 0&&L&&L.has(y)&&(console.error("Duplicate key",y),y=void 0),M===y)w!==void 0&&y!==void 0&&w.delete(y),S++;else if(w=w||yn(a,S),y===void 0){for(;c!==void 0&&M!==void 0;)S++,c=a[S],M=typeof c=="object"?c.el.key:void 0;S++}else c=w.get(y),c!==void 0&&w.delete(y),(L=L||new Set).add(y)}let N;if(typeof A=="object"){if(A.tag===It)N=it(c);else{let y,st=!1;if(typeof c=="object"&&c.el.tag===A.tag)y=c.el.props,c.el=A,A.static_&&(N=it(c),st=!0);else{typeof c=="object"&&(p=p||[]).push(c);const un=c;c=new ze(A),c.fallbackValue=un}st||(A.tag===At?N=P?P.then(()=>ot(e,c,s,y,l)):ot(e,c,s,y,l):A.tag===ue?N=P?P.then(()=>lt(e,t,n,r,s,c,l)):lt(e,t,n,r,s,c,l):typeof A.tag=="function"?N=P?P.then(()=>ft(e,t,n,r,s,c,y,l)):ft(e,t,n,r,s,c,y,l):N=P?P.then(()=>at(e,t,r,s,c,y,l)):at(e,t,r,s,c,y,l))}const M=A.ref;b(N)?(x=!0,typeof M=="function"&&(N=N.then(y=>(M(e.read(y)),y))),l!==void 0&&(P=N)):typeof M=="function"&&M(e.read(N))}else typeof c=="object"&&(p=p||[]).push(c),typeof A=="string"?N=c=e.text(A,s,l):c=void 0;d[g]=N,u[g]=c}for(;S<_;S++){const g=a[S];typeof g=="object"&&typeof g.el.key>"u"&&(p=p||[]).push(g)}if(w!==void 0&&w.size>0&&(p=p||[]).push(...w.values()),i.children=U(u),x){let g=Promise.all(d).finally(()=>{if(p)for(let c=0;c<p.length;c++)we(e,n,r,p[c])}),X;return g=Promise.race([g,new Promise(c=>X=c)]),i.onNextValues&&i.onNextValues(g),i.onNextValues=X,g.then(c=>(i.inflightValue=i.fallbackValue=void 0,Je(c)))}else{if(p)for(let g=0;g<p.length;g++)we(e,n,r,p[g]);return i.onNextValues&&(i.onNextValues(d),i.onNextValues=void 0),i.inflightValue=i.fallbackValue=void 0,Je(d)}}function yn(e,t){const n=new Map;for(let r=t;r<e.length;r++){const s=e[r];typeof s=="object"&&typeof s.el.key<"u"&&n.set(s.el.key,s)}return n}function it(e){if(typeof e!="object")return e;const t=typeof e.el.tag=="function"?e.ctx:void 0;return t&&t.f&H&&t.inflightValue?t.inflightValue:e.inflightValue?e.inflightValue:j(e)}function ot(e,t,n,r,s){const i=t.el.props;return(!r||r.value!==i.value)&&(t.value=e.raw(i.value,n,s)),t.value}function lt(e,t,n,r,s,i,o){const l=ie(e,t,n,r,s,i,i.el.props.children,o);return b(l)?(i.inflightValue=l.then(a=>U(a)),i.inflightValue):U(l)}function at(e,t,n,r,s,i,o){const l=s.el,a=l.tag;let u;l.tag===k?t=s.value=l.props.root:o!==void 0&&(u=o.children.shift()),r=e.scope(r,a,l.props);let h;u!=null&&typeof u!="string"&&(h=e.hydrate(a,u,l.props),h===void 0&&(u=void 0));const d=ie(e,t,s,n,r,s,s.el.props.children,h);return b(d)?(s.inflightValue=d.then(p=>ut(e,r,s,p,i,u)),s.inflightValue):ut(e,r,s,d,i,u)}function ut(e,t,n,r,s,i){const o=n.el.tag;let l=n.value;i!=null&&(l=n.value=i);let a=n.el.props,u;if(o!==k){l==null&&(l=n.value=e.create(o,a,t));for(const h in{...s,...a}){const d=a[h];d===It?(u=u||new Set).add(h):h!=="children"&&e.patch(o,l,h,d,s&&s[h],t)}}if(u){a={...n.el.props};for(const h of u)a[h]=s&&s[h];n.el=new tt(o,a,n.el.key,n.el.ref)}if(e.arrange(o,l,a,r,s,B(n.cachedChildValues)),n.cachedChildValues=U(r),o===k){Be(e,n.value);return}return l}function Be(e,t,n){if(e.flush(t),typeof t!="object"||t===null)return;const r=Q.get(t);if(r){if(n){const s=new Map;for(let[i,o]of r)wn(n,i)||(r.delete(i),s.set(i,o));s.size?Q.set(t,s):Q.delete(t)}else Q.delete(t);for(const[s,i]of r){const o=e.read(j(s.ret));for(const l of i)l(o)}}}function we(e,t,n,r){if(typeof r.el.tag=="function")n=r.ctx,ge(n);else if(r.el.tag===k)t=r,e.arrange(k,t.value,t.el.props,[],t.el.props,B(t.cachedChildValues)),Be(e,t.value);else if(r.el.tag!==ue){if(ee(r.value)){const i=Ct(n,t);for(let o=0;o<i.length;o++){const l=i[o];r.value.removeEventListener(l.type,l.callback,l.options)}}e.dispose(r.el.tag,r.value,r.el.props),t=r}const s=B(r.children);for(let i=0;i<s.length;i++){const o=s[i];typeof o=="object"&&we(e,t,n,o)}}const H=1,m=2,T=4,oe=8,W=16,le=32,V=64,$=128,Z=256,z=512,He=1024,De=2048,Xe=new WeakMap,be=new WeakMap,Pe=new WeakMap,Q=new WeakMap;class gn{constructor(t,n,r,s,i,o){this.f=0,this.owner=new mn(this),this.renderer=t,this.root=n,this.host=r,this.parent=s,this.scope=i,this.ret=o,this.iterator=void 0,this.inflightBlock=void 0,this.inflightValue=void 0,this.enqueuedBlock=void 0,this.enqueuedValue=void 0,this.onProps=void 0,this.onPropsRequested=void 0}}const E=Symbol.for("crank.ContextImpl");class mn{constructor(t){this[E]=t}get props(){return this[E].ret.el.props}get value(){return this[E].renderer.read(j(this[E].ret))}*[Symbol.iterator](){const t=this[E];try{for(t.f|=T;!(t.f&$);){if(t.f&W)throw new Error("Context iterated twice without a yield");t.f|=W,yield t.ret.el.props}}finally{t.f&=~T}}async*[Symbol.asyncIterator](){const t=this[E];if(t.f&Z)throw new Error("Use for...of in sync generator components");try{for(t.f|=oe;!(t.f&$);){if(t.f&W)throw new Error("Context iterated twice without a yield");if(t.f|=W,t.f&le)t.f&=~le,yield t.ret.el.props;else{const n=await new Promise(r=>t.onProps=r);if(t.f&$)break;yield n}t.onPropsRequested&&(t.onPropsRequested(),t.onPropsRequested=void 0)}}finally{t.f&=~oe,t.onPropsRequested&&(t.onPropsRequested(),t.onPropsRequested=void 0)}}refresh(){const t=this[E];if(t.f&$)return console.error("Component is unmounted"),t.renderer.read(void 0);if(t.f&m)return console.error("Component is already executing"),this.value;const n=ve(t);return b(n)?n.then(r=>t.renderer.read(r)):t.renderer.read(n)}schedule(t){const n=this[E];let r=be.get(n);r||(r=new Set,be.set(n,r)),r.add(t)}flush(t){const n=this[E];if(typeof n.root!="object"||n.root===null)return;let r=Q.get(n.root);r||(r=new Map,Q.set(n.root,r));let s=r.get(n);s||(s=new Set,r.set(n,s)),s.add(t)}cleanup(t){const n=this[E];if(n.f&$){const s=n.renderer.read(j(n.ret));t(s);return}let r=Pe.get(n);r||(r=new Set,Pe.set(n,r)),r.add(t)}consume(t){for(let n=this[E].parent;n!==void 0;n=n.parent){const r=Xe.get(n);if(r&&r.has(t))return r.get(t)}}provide(t,n){const r=this[E];let s=Xe.get(r);s||(s=new Map,Xe.set(r,s)),s.set(t,n)}addEventListener(t,n,r){const s=this[E];let i;if(yt(n)){const a=q.get(s);a?i=a:(i=[],q.set(s,i))}else return;r=gt(r);let o;typeof n=="object"?o=()=>n.handleEvent.apply(n,arguments):o=n;const l={type:t,listener:n,callback:o,options:r};if(r.once&&(l.callback=function(){const a=i.indexOf(l);return a!==-1&&i.splice(a,1),o.apply(this,arguments)}),!i.some(a=>l.type===a.type&&l.listener===a.listener&&!l.options.capture==!a.options.capture)){i.push(l);for(const a of se(s.ret))ee(a)&&a.addEventListener(l.type,l.callback,l.options)}}removeEventListener(t,n,r){const s=this[E],i=q.get(s);if(i==null||!yt(n))return;const o=gt(r),l=i.findIndex(u=>u.type===t&&u.listener===n&&!u.options.capture==!o.capture);if(l===-1)return;const a=i[l];i.splice(l,1);for(const u of se(s.ret))ee(u)&&u.removeEventListener(a.type,a.callback,a.options)}dispatchEvent(t){const n=this[E],r=[];for(let o=n.parent;o!==void 0;o=o.parent)r.push(o);let s=!1;const i=t.stopImmediatePropagation;O(t,"stopImmediatePropagation",()=>(s=!0,i.call(t))),O(t,"target",n.owner);try{O(t,"eventPhase",En);for(let o=r.length-1;o>=0;o--){const l=r[o],a=q.get(l);if(a){O(t,"currentTarget",l.owner);for(const u of a)if(u.type===t.type&&u.options.capture){try{u.callback.call(l.owner,t)}catch(h){console.error(h)}if(s)return!0}}if(t.cancelBubble)return!0}{O(t,"eventPhase",kn),O(t,"currentTarget",n.owner);const o=n.ret.el.props["on"+t.type];if(o!=null&&(o(t),s||t.cancelBubble))return!0;const l=q.get(n);if(l){for(const a of l)if(a.type===t.type){try{a.callback.call(n.owner,t)}catch(u){console.error(u)}if(s)return!0}if(t.cancelBubble)return!0}}if(t.bubbles){O(t,"eventPhase",Sn);for(let o=0;o<r.length;o++){const l=r[o],a=q.get(l);if(a){O(t,"currentTarget",l.owner);for(const u of a)if(u.type===t.type&&!u.options.capture){try{u.callback.call(l.owner,t)}catch(h){console.error(h)}if(s)return!0}}if(t.cancelBubble)return!0}}}finally{return O(t,"eventPhase",vn),O(t,"currentTarget",null),!t.defaultPrevented}}}function wn(e,t){for(let n=t;n!==void 0;n=n.parent)if(n===e)return!0;return!1}function ft(e,t,n,r,s,i,o,l){let a;if(o){if(a=i.ctx,a.f&m)return console.error("Component is already executing"),i.cachedChildValues}else a=i.ctx=new gn(e,t,n,r,s,i);return a.f|=H,ve(a,l)}function K(e,t,n){if(e.f&$)return;if(e.f&V)return;t===void 0&&console.error("A component has returned or yielded undefined. If this was intentional, return or yield null instead.");let r;try{e.f|=m,r=ie(e.renderer,e.root,e.host,e,e.scope,e.ret,Tt(t),n)}finally{e.f&=~m}return b(r)?(e.ret.inflightValue=r.then(s=>ct(e,s)),e.ret.inflightValue):ct(e,r)}function ct(e,t){if(e.f&$)return;const n=q.get(e);if(n&&n.length)for(let o=0;o<t.length;o++){const l=t[o];if(ee(l))for(let a=0;a<n.length;a++){const u=n[a];l.addEventListener(u.type,u.callback,u.options)}}const r=B(e.ret.cachedChildValues);let s=e.ret.cachedChildValues=U(t);if(e.f&He)e.f|=De;else if(!(e.f&H)){if(!Pn(r,t)){const o=Ct(e.parent,e.host);if(o.length)for(let h=0;h<t.length;h++){const d=t[h];if(ee(d))for(let p=0;p<o.length;p++){const w=o[p];d.addEventListener(w.type,w.callback,w.options)}}const l=e.host,a=B(l.cachedChildValues);bn(e,l);const u=se(l);e.renderer.arrange(l.el.tag,l.value,l.el.props,u,l.el.props,a)}Be(e.renderer,e.root,e)}const i=be.get(e);if(i){be.delete(e),e.f|=He;const o=e.renderer.read(s);for(const l of i)l(o);e.f&=~He,e.f&De&&(e.f&=~De,s=j(e.ret))}return e.f&=~H,s}function bn(e,t){for(let n=e.parent;n!==void 0&&n.host===t;n=n.parent)n.ret.cachedChildValues=void 0;t.cachedChildValues=void 0}function Pn(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],s=t[n];if(r!==s)return!1}return!0}function ve(e,t){if(e.f&z&&!(e.f&T)){if(t!==void 0)throw new Error("Hydration error");const n=e.f&oe&&!e.onProps;return fe(e),n?(e.inflightBlock==null&&(e.inflightBlock=new Promise(r=>e.onPropsRequested=r)),e.inflightBlock.then(()=>(e.inflightBlock=void 0,e.inflightValue))):e.inflightValue}else if(e.inflightBlock){if(!e.enqueuedBlock){if(t!==void 0)throw new Error("Hydration error");let n;e.enqueuedBlock=new Promise(r=>n=r),e.enqueuedValue=e.inflightBlock.then(()=>{try{const[r,s]=ht(e);return r&&n(r.finally(()=>dt(e))),s}catch(r){if(!(e.f&H)){if(!e.parent)throw r;return D(e.parent,r)}throw r}})}}else try{const[n,r]=ht(e,t);return n&&(e.inflightBlock=n.then(s=>s).finally(()=>dt(e)),e.inflightValue=r),r}catch(n){if(!(e.f&H)){if(!e.parent)throw n;return D(e.parent,n)}throw n}return e.enqueuedValue}function dt(e){e.f&z&&!(e.f&T)||(e.inflightBlock=e.enqueuedBlock,e.inflightValue=e.enqueuedValue,e.enqueuedBlock=void 0,e.enqueuedValue=void 0)}function ht(e,t){const n=e.ret,r=!e.iterator;if(r){fe(e),e.f|=m,jt(e);let i;try{i=n.el.tag.call(e.owner,n.el.props)}catch(o){throw e.f|=V,o}finally{e.f&=~m}if(cn(i))e.iterator=i;else if(b(i)){const o=i instanceof Promise?i:Promise.resolve(i),l=o.then(a=>K(e,a,t),a=>{throw e.f|=V,a});return[o.catch(F),l]}else return[void 0,K(e,i,t)]}else if(t!==void 0)throw new Error("Hydration error");let s;if(r){try{e.f|=m,s=e.iterator.next()}catch(i){throw e.f|=V,i}finally{e.f&=~m}b(s)?e.f|=z:e.f|=Z}if(e.f&Z){if(e.f&=~W,!r)try{e.f|=m,s=e.iterator.next(e.renderer.read(j(n)))}catch(l){throw e.f|=V,l}finally{e.f&=~m}if(b(s))throw new Error("Mixed generator component");s.done&&(e.f&=~Z,e.iterator=void 0);let i;try{i=K(e,s.value,t),b(i)&&(i=i.catch(l=>G(e,l)))}catch(l){i=G(e,l)}return[b(i)?i.catch(F):void 0,i]}else if(e.f&T){if(e.f&=~W,!r)try{e.f|=m,s=e.iterator.next(e.renderer.read(j(n)))}catch(l){throw e.f|=V,l}finally{e.f&=~m}if(!b(s))throw new Error("Mixed generator component");const i=s.catch(F),o=s.then(l=>{let a;e.f&T||pt(e,Promise.resolve(l),t);try{a=K(e,l.value,t),b(a)&&(a=a.catch(u=>G(e,u)))}catch(u){a=G(e,u)}return a},l=>{throw e.f|=V,l});return[i,o]}else return pt(e,s,t),[e.inflightBlock,e.inflightValue]}async function pt(e,t,n){let r=!1;try{for(;!r&&!(e.f&T);){let s;e.inflightValue=new Promise(a=>s=a),e.f&H&&e.inflightValue.catch(F);let i;try{i=await t}catch(a){r=!0,e.f|=V,s(Promise.reject(a));break}finally{e.f&=~W,e.f&oe||(e.f&=~le)}r=!!i.done;let o;try{o=K(e,i.value,n),n=void 0,b(o)&&(o=o.catch(a=>G(e,a)))}catch(a){o=G(e,a)}finally{s(o)}let l;if(e.ret.inflightValue?(l=e.ret.inflightValue.then(a=>e.renderer.read(a)),l.catch(a=>{if(!(e.f&H)){if(!e.parent)throw a;return D(e.parent,a)}})):l=e.renderer.read(j(e.ret)),e.f&$)if(e.f&oe)try{e.f|=m,t=e.iterator.next(l)}finally{e.f&=~m}else{me(e);break}else if(!r&&!(e.f&T))try{e.f|=m,t=e.iterator.next(l)}finally{e.f&=~m}}}finally{r&&(e.f&=~z,e.iterator=void 0)}}function fe(e){e.onProps?(e.onProps(e.ret.el.props),e.onProps=void 0,e.f&=~le):e.f|=le}function ge(e){jt(e);const t=Pe.get(e);if(t){Pe.delete(e);const n=e.renderer.read(j(e.ret));for(const r of t)r(n)}if(e.f|=$,e.iterator)if(e.f&Z){let n;e.f&T&&(n=ve(e)),b(n)?n.then(()=>{e.f&T?ge(e):me(e)},r=>{if(!e.parent)throw r;return D(e.parent,r)}):e.f&T?ge(e):me(e)}else e.f&z&&(e.f&T?ve(e).then(()=>{e.f&T?ge(e):me(e)},r=>{if(!e.parent)throw r;return D(e.parent,r)}):fe(e))}function me(e){if(fe(e),e.iterator&&typeof e.iterator.return=="function")try{e.f|=m;const t=e.iterator.return();b(t)&&t.catch(n=>{if(!e.parent)throw n;return D(e.parent,n)})}finally{e.f&=~m}}const vn=0,En=1,kn=2,Sn=3,q=new WeakMap;function yt(e){return typeof e=="function"||e!==null&&typeof e=="object"&&typeof e.handleEvent=="function"}function gt(e){return typeof e=="boolean"?{capture:e}:e??{}}function ee(e){return e!=null&&typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"&&typeof e.dispatchEvent=="function"}function O(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!0})}function Ct(e,t){let n=[];for(;e!==void 0&&e.host===t;){const r=q.get(e);r&&(n=n.concat(r)),e=e.parent}return n}function jt(e){const t=q.get(e);if(t&&t.length){for(const n of se(e.ret))if(ee(n))for(const r of t)n.removeEventListener(r.type,r.callback,r.options);t.length=0}}function G(e,t){if(!e.iterator||typeof e.iterator.throw!="function")throw t;fe(e);let n;try{e.f|=m,n=e.iterator.throw(t)}catch(r){throw e.f|=V,r}finally{e.f&=~m}return b(n)?n.then(r=>(r.done&&(e.f&=~z,e.iterator=void 0),K(e,r.value)),r=>{throw e.f|=V,r}):(n.done&&(e.f&=~Z,e.f&=~z,e.iterator=void 0),K(e,n.value))}function D(e,t){let n;try{n=G(e,t)}catch(r){if(!e.parent)throw r;return D(e.parent,r)}return b(n)?n.catch(r=>{if(!e.parent)throw r;return D(e.parent,r)}):n}function Lt(e,t,n){return ne(e,{...t,key:n})}const Rn="",f=Lt,Ot=Lt,We="http://www.w3.org/2000/svg",In={scope(e,t){switch(t){case k:case"foreignObject":e=void 0;break;case"svg":e=We;break}return e},create(e,t,n){if(typeof e!="string")throw new Error(`Unknown tag: ${e.toString()}`);return e.toLowerCase()==="svg"&&(n=We),n?document.createElementNS(n,e):document.createElement(e)},hydrate(e,t,n){if(typeof e!="string"&&e!==k)throw new Error(`Unknown tag: ${e.toString()}`);if(typeof e=="string"&&e.toUpperCase()!==t.tagName)return;const r=[];for(let s=0;s<t.childNodes.length;s++){const i=t.childNodes[s];i.nodeType===Node.TEXT_NODE?r.push(i.data):i.nodeType===Node.ELEMENT_NODE&&r.push(i)}return{props:n,children:r}},patch(e,t,n,r,s,i){const o=i===We;switch(n){case"style":{const l=t.style;if(l==null)t.setAttribute("style",r);else if(r==null||r===!1)t.removeAttribute("style");else if(r===!0)t.setAttribute("style","");else if(typeof r=="string")l.cssText!==r&&(l.cssText=r);else{typeof s=="string"&&(l.cssText="");for(const a in{...s,...r}){const u=r&&r[a];u==null?l.removeProperty(a):l.getPropertyValue(a)!==u&&l.setProperty(a,u)}}break}case"class":case"className":r===!0?t.setAttribute("class",""):r==null?t.removeAttribute("class"):o?t.getAttribute("class")!==r&&t.setAttribute("class",r):t.className!==r&&(t.className=r);break;case"innerHTML":r!==s&&(t.innerHTML=r);break;default:{if(n in t&&!(typeof r=="string"&&typeof t[n]=="boolean")){let l=t;do if(Object.prototype.hasOwnProperty.call(l,n))break;while(l=Object.getPrototypeOf(l));const a=Object.getOwnPropertyDescriptor(l,n);if(a!=null&&(a.writable===!0||a.set!==void 0)){(t[n]!==r||s===void 0)&&(t[n]=r);return}}if(r===!0)r="";else if(r==null||r===!1){t.removeAttribute(n);return}t.getAttribute(n)!==r&&t.setAttribute(n,r)}}},arrange(e,t,n,r,s,i){if(e===k&&(t==null||typeof t.nodeType!="number"))throw new TypeError(`Portal root is not a node. Received: ${JSON.stringify(t&&t.toString())}`);if(!("innerHTML"in n)&&("children"in n||i&&i.length))if(r.length===0)t.textContent="";else{let o=t.firstChild,l=0;for(;o!==null&&l<r.length;){const a=r[l];if(o===a)o=o.nextSibling,l++;else if(typeof a=="string")o.nodeType===Node.TEXT_NODE?(o.data!==a&&(o.data=a),o=o.nextSibling):t.insertBefore(document.createTextNode(a),o),l++;else if(o.nodeType===Node.TEXT_NODE){const u=o.nextSibling;t.removeChild(o),o=u}else if(t.insertBefore(a,o),l++,o!==r[l]){const u=o.nextSibling;t.removeChild(o),o=u}}for(;o!==null;){const a=o.nextSibling;t.removeChild(o),o=a}for(;l<r.length;l++){const a=r[l];t.appendChild(typeof a=="string"?document.createTextNode(a):a)}}},text(e,t,n){if(n!=null){let r=n.children.shift();typeof r!="string"||!r.startsWith(e)||e.length<r.length&&(r=r.slice(e.length),n.children.unshift(r))}return e},raw(e,t,n){let r;if(typeof e=="string"){const s=t==null?document.createElement("div"):document.createElementNS(t,"svg");s.innerHTML=e,s.childNodes.length===0?r=void 0:s.childNodes.length===1?r=s.childNodes[0]:r=Array.from(s.childNodes)}else r=e;if(n!=null)if(Array.isArray(r))for(let s=0;s<r.length;s++){const i=r[s];typeof i!="string"&&(i.nodeType===Node.ELEMENT_NODE||i.nodeType===Node.TEXT_NODE)&&n.children.shift()}else r!=null&&typeof r!="string"&&(r.nodeType===Node.ELEMENT_NODE||r.nodeType===Node.TEXT_NODE)&&n.children.shift();return r}};class An extends pn{constructor(){super(In)}render(t,n,r){return mt(n),super.render(t,n,r)}hydrate(t,n,r){return mt(n),super.hydrate(t,n,r)}}function mt(e){if(e===null||typeof e=="object"&&typeof e.nodeType!="number")throw new TypeError(`Render root is not a node. Received: ${JSON.stringify(e&&e.toString())}`)}const Nn=new An;const Y="4.11.1";class C extends Error{}class R extends C{constructor(t,n,r,s){super(`${t} ${R.makeMessage(n,r)}`),this.status=t,this.headers=s;const i=n;this.error=i,this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(t,n){return t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n||"status code (no body)"}static generate(t,n,r,s){if(!t)return new xe({cause:et(n)});const i=n==null?void 0:n.error;return t===400?new Vt(t,i,r,s):t===401?new _t(t,i,r,s):t===403?new qt(t,i,r,s):t===404?new $t(t,i,r,s):t===409?new Bt(t,i,r,s):t===422?new xt(t,i,r,s):t===429?new Mt(t,i,r,s):t>=500?new Ft(t,i,r,s):new R(t,i,r,s)}}class Ye extends R{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class xe extends R{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class nt extends xe{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Vt extends R{constructor(){super(...arguments),this.status=400}}class _t extends R{constructor(){super(...arguments),this.status=401}}class qt extends R{constructor(){super(...arguments),this.status=403}}class $t extends R{constructor(){super(...arguments),this.status=404}}class Bt extends R{constructor(){super(...arguments),this.status=409}}class xt extends R{constructor(){super(...arguments),this.status=422}}class Mt extends R{constructor(){super(...arguments),this.status=429}}class Ft extends R{}class Tn{constructor(t,n){this.response=t,this.controller=n,this.decoder=new Cn}async*iterMessages(){if(!this.response.body)throw this.controller.abort(),new C("Attempted to iterate over a response with no body");const t=new te,n=Ln(this.response.body);for await(const r of n)for(const s of t.decode(r)){const i=this.decoder.decode(s);i&&(yield i)}for(const r of t.flush()){const s=this.decoder.decode(r);s&&(yield s)}}async*[Symbol.asyncIterator](){let t=!1;try{for await(const n of this.iterMessages())if(!t){if(n.data.startsWith("[DONE]")){t=!0;continue}if(n.event===null)try{yield JSON.parse(n.data)}catch(r){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),r}}t=!0}catch(n){if(n instanceof Error&&n.name==="AbortError")return;throw n}finally{t||this.controller.abort()}}}class Cn{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=jn(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}class te{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let n=this.decodeText(t);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=te.NEWLINE_CHARS.has(n[n.length-1]||"");let s=n.split(te.NEWLINE_REGEXP);return s.length===1&&!r?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),r||(this.buffer=[s.pop()||""]),s)}decodeText(t){var n;if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new C(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return(n=this.textDecoder)!==null&&n!==void 0||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new C(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new C("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}te.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);te.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function jn(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function Ln(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}let wt=!1,re,Ut,Ht,Qe,Dt,Xt,Wt,Kt;function On(e,t={auto:!1}){if(wt)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(re)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${re}'\``);wt=t.auto,re=e.kind,Ut=e.fetch,e.Request,e.Response,e.Headers,Ht=e.FormData,e.Blob,Qe=e.File,Dt=e.getMultipartRequestOptions,Xt=e.getDefaultAgent,Wt=e.fileFromPath,Kt=e.isFsReadStream}class Vn{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function _n({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,i;try{n=fetch,r=Request,s=Response,i=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,l)=>({...l,body:new Vn(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}re||On(_n(),{auto:!0});const Gt=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",qn=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Jt(e),Jt=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",$n=e=>qn(e)||Gt(e)||Kt(e);async function zt(e,t,n={}){var r,s,i;if(e=await e,Gt(e)){const l=await e.blob();return t||(t=(r=new URL(e.url).pathname.split(/[\\/]/).pop())!==null&&r!==void 0?r:"unknown_file"),new Qe([l],t,n)}const o=await Bn(e);if(t||(t=(s=Mn(e))!==null&&s!==void 0?s:"unknown_file"),!n.type){const l=(i=o[0])===null||i===void 0?void 0:i.type;typeof l=="string"&&(n={...n,type:l})}return new Qe(o,t,n)}async function Bn(e){var t;let n=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)n.push(e);else if(Jt(e))n.push(await e.arrayBuffer());else if(Fn(e))for await(const r of e)n.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name}; props: ${xn(e)}`);return n}function xn(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function Mn(e){var t;return Ke(e.name)||Ke(e.filename)||((t=Ke(e.path))===null||t===void 0?void 0:t.split(/[\\/]/).pop())}const Ke=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},Fn=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",bt=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",ae=async e=>{const t=await Un(e.body);return Dt(t,e)},Un=async e=>{const t=new Ht;return await Promise.all(Object.entries(e||{}).map(([n,r])=>Ze(t,n,r))),t},Ze=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if($n(n)){const r=await zt(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Ze(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Ze(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Hn=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},Dn=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},he;const Xn=2;async function Yt(e){const{response:t}=e;if(e.options.stream)return new Tn(t,e.controller);const n=t.headers.get("content-type");if(n!=null&&n.includes("application/json")){const s=await t.json();return Ee("response",t.status,t.url,t.headers,s),s}const r=await t.text();return Ee("response",t.status,t.url,t.headers,r),r}class Me extends Promise{constructor(t,n=Yt){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new Me(this.responsePromise,async n=>t(await this.parseResponse(n)))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class Wn{constructor({baseURL:t,maxRetries:n,timeout:r=6e5,httpAgent:s,fetch:i}){this.baseURL=t,this.maxRetries=Ge("maxRetries",n??Xn),this.timeout=Ge("timeout",r),this.httpAgent=s,this.fetch=i??Ut}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Qn(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${rr()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(s=>({method:t,path:n,...s})))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}return null}buildRequest(t){var n,r,s,i,o,l;const{method:a,path:u,query:h,headers:d={}}=t,p=bt(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,w=this.calculateContentLength(p),L=this.buildURL(u,h);"timeout"in t&&Ge("timeout",t.timeout);const x=(n=t.timeout)!==null&&n!==void 0?n:this.timeout,P=(s=(r=t.httpAgent)!==null&&r!==void 0?r:this.httpAgent)!==null&&s!==void 0?s:Xt(L),S=x+1e3;typeof((i=P==null?void 0:P.options)===null||i===void 0?void 0:i.timeout)=="number"&&S>((o=P.options.timeout)!==null&&o!==void 0?o:0)&&(P.options.timeout=S),this.idempotencyHeader&&a!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=t.idempotencyKey);const _={...w&&{"Content-Length":w},...this.defaultHeaders(t),...d};bt(t.body)&&re!=="node"&&delete _["Content-Type"],Object.keys(_).forEach(X=>_[X]===null&&delete _[X]);const g={method:a,...p&&{body:p},headers:_,...P&&{agent:P},signal:(l=t.signal)!==null&&l!==void 0?l:null};return this.validateHeaders(_,d),{req:g,url:L,timeout:x}}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,s){return R.generate(t,n,r,s)}request(t,n=null){return new Me(this.makeRequest(t,n))}async makeRequest(t,n){var r,s,i;const o=await t;n==null&&(n=(r=o.maxRetries)!==null&&r!==void 0?r:this.maxRetries);const{req:l,url:a,timeout:u}=this.buildRequest(o);if(await this.prepareRequest(l,{url:a,options:o}),Ee("request",a,o,l.headers),!((s=o.signal)===null||s===void 0)&&s.aborted)throw new Ye;const h=new AbortController,d=await this.fetchWithTimeout(a,l,u,h).catch(et);if(d instanceof Error){if(!((i=o.signal)===null||i===void 0)&&i.aborted)throw new Ye;if(n)return this.retryRequest(o,n);throw d.name==="AbortError"?new nt:new xe({cause:d})}const p=Gn(d.headers);if(!d.ok){if(n&&this.shouldRetry(d))return this.retryRequest(o,n,p);const w=await d.text().catch(S=>et(S).message),L=Zn(w),x=L?void 0:w;throw Ee("response",d.status,a,p,x),this.makeStatusError(d.status,L,x,p)}return{response:d,options:o,controller:h}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new Kn(this,r,t)}buildURL(t,n){const r=tr(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return en(s)||(n={...s,...n}),n&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new C(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,s){const{signal:i,...o}=n||{};i&&i.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),r);return this.getRequestClient().fetch.call(void 0,t,{signal:s.signal,...o}).finally(()=>{clearTimeout(l)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){var s;n-=1;let i;const o=r==null?void 0:r["retry-after"];if(o){const l=parseInt(o);Number.isNaN(l)?i=Date.parse(o)-Date.now():i=l*1e3}if(!i||!Number.isInteger(i)||i<=0||i>60*1e3){const l=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Zt(i),this.makeRequest(t,n)}calculateDefaultRetryTimeoutMillis(t,n){const i=n-t,o=Math.min(.5*Math.pow(i-1,2),2),l=Math.random()-.5;return(o+l)*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Y}`}}class Qt{constructor(t,n,r,s){he.set(this,void 0),Hn(this,he,t,"f"),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new C("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t)n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[s,i]of r)t.url.searchParams.set(s,i);n.query=void 0,n.path=t.url.toString()}return await Dn(this,he,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(he=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class Kn extends Me{constructor(t,n,r){super(n,async s=>new r(t,s.response,await Yt(s),s.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const Gn=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),Jn={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0},Pt=e=>typeof e=="object"&&e!==null&&!en(e)&&Object.keys(e).every(t=>nr(Jn,t)),zn=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Y,"X-Stainless-OS":Et(Deno.build.os),"X-Stainless-Arch":vt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Y,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Y,"X-Stainless-OS":Et(process.platform),"X-Stainless-Arch":vt(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=Yn();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Y,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Y,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Yn(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:t,version:`${s}.${i}.${o}`}}}return null}const vt=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Et=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let pe;const Qn=()=>pe??(pe=zn()),Zn=e=>{try{return JSON.parse(e)}catch{return}},er=new RegExp("^(?:[a-z]+:)?//","i"),tr=e=>er.test(e),Zt=e=>new Promise(t=>setTimeout(t,e)),Ge=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new C(`${e} must be an integer`);if(t<0)throw new C(`${e} must be a positive integer`);return t},et=e=>e instanceof Error?e:new Error(e),kt=e=>{var t,n,r,s;if(typeof process<"u")return(n=(t=process.env)===null||t===void 0?void 0:t[e])!==null&&n!==void 0?n:void 0;if(typeof Deno<"u")return(s=(r=Deno.env)===null||r===void 0?void 0:r.get)===null||s===void 0?void 0:s.call(r,e)};function en(e){if(!e)return!0;for(const t in e)return!1;return!0}function nr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ee(e,...t){typeof process<"u"&&process.env.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const rr=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),sr=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class Fe extends Qt{constructor(t,n,r,s){super(t,n,r,s),this.object=r.object,this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class rt extends Qt{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var t,n;if(!(!((t=this.data)===null||t===void 0)&&t.length))return null;const r=(n=this.data[this.data.length-1])===null||n===void 0?void 0:n.id;return r?{params:{after:r}}:null}}class I{constructor(t){this.client=t,this.get=t.get.bind(t),this.post=t.post.bind(t),this.patch=t.patch.bind(t),this.put=t.put.bind(t),this.delete=t.delete.bind(t),this.getAPIList=t.getAPIList.bind(t)}}class ke extends I{create(t,n){return this.post("/audio/transcriptions",ae({body:t,...n}))}}ke||(ke={});class Se extends I{create(t,n){return this.post("/audio/translations",ae({body:t,...n}))}}Se||(Se={});let Re=class extends I{constructor(){super(...arguments),this.transcriptions=new ke(this.client),this.translations=new Se(this.client)}};(function(e){e.Transcriptions=ke,e.Translations=Se})(Re||(Re={}));let Ie=class extends I{create(t,n){var r;return this.post("/chat/completions",{body:t,...n,stream:(r=t.stream)!==null&&r!==void 0?r:!1})}};Ie||(Ie={});class Ae extends I{constructor(){super(...arguments),this.completions=new Ie(this.client)}}(function(e){e.Completions=Ie})(Ae||(Ae={}));class Ne extends I{create(t,n){var r;return this.post("/completions",{body:t,...n,stream:(r=t.stream)!==null&&r!==void 0?r:!1})}}Ne||(Ne={});class Te extends I{create(t,n){return this.post("/embeddings",{body:t,...n})}}Te||(Te={});class Ce extends I{create(t,n){return this.post("/edits",{body:t,...n})}}Ce||(Ce={});class je extends I{create(t,n){return this.post("/files",ae({body:t,...n}))}retrieve(t,n){return this.get(`/files/${t}`,n)}list(t){return this.getAPIList("/files",tn,t)}del(t,n){return this.delete(`/files/${t}`,n)}retrieveContent(t,n){return this.get(`/files/${t}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(t);for(;!o.status||!s.has(o.status);)if(await Zt(n),o=await this.retrieve(t),Date.now()-i>r)throw new nt({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return o}}class tn extends Fe{}je||(je={});class Le extends I{create(t,n){return this.post("/fine-tunes",{body:t,...n})}retrieve(t,n){return this.get(`/fine-tunes/${t}`,n)}list(t){return this.getAPIList("/fine-tunes",nn,t)}cancel(t,n){return this.post(`/fine-tunes/${t}/cancel`,n)}listEvents(t,n,r){var s;return this.get(`/fine-tunes/${t}/events`,{query:n,timeout:864e5,...r,stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1})}}class nn extends Fe{}Le||(Le={});class Oe extends I{create(t,n){return this.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return Pt(t)?this.list({},t):this.getAPIList("/fine_tuning/jobs",rn,{query:t,...n})}cancel(t,n){return this.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return Pt(n)?this.listEvents(t,{},n):this.getAPIList(`/fine_tuning/jobs/${t}/events`,sn,{query:n,...r})}}class rn extends rt{}class sn extends rt{}Oe||(Oe={});class Ve extends I{constructor(){super(...arguments),this.jobs=new Oe(this.client)}}(function(e){e.Jobs=Oe,e.FineTuningJobsPage=rn,e.FineTuningJobEventsPage=sn})(Ve||(Ve={}));class _e extends I{createVariation(t,n){return this.post("/images/variations",ae({body:t,...n}))}edit(t,n){return this.post("/images/edits",ae({body:t,...n}))}generate(t,n){return this.post("/images/generations",{body:t,...n})}}_e||(_e={});class qe extends I{retrieve(t,n){return this.get(`/models/${t}`,n)}list(t){return this.getAPIList("/models",on,t)}del(t,n){return this.delete(`/models/${t}`,n)}}class on extends Fe{}qe||(qe={});class $e extends I{create(t,n){return this.post("/moderations",{body:t,...n})}}$e||($e={});var ln;class v extends Wn{constructor(t){var n,r,s,{apiKey:i=kt("OPENAI_API_KEY"),organization:o=(n=kt("OPENAI_ORG_ID"))!==null&&n!==void 0?n:null,...l}=t===void 0?{}:t;if(i===void 0)throw new C("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' }).");const a={apiKey:i,organization:o,...l,baseURL:(r=l.baseURL)!==null&&r!==void 0?r:"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&sr())throw new C(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:(s=a.timeout)!==null&&s!==void 0?s:6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new Ne(this),this.chat=new Ae(this),this.edits=new Ce(this),this.embeddings=new Te(this),this.files=new je(this),this.images=new _e(this),this.audio=new Re(this),this.moderations=new $e(this),this.models=new qe(this),this.fineTuning=new Ve(this),this.fineTunes=new Le(this),this._options=a,this.apiKey=i,this.organization=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}ln=v;v.OpenAI=ln;v.OpenAIError=C;v.APIError=R;v.APIConnectionError=xe;v.APIConnectionTimeoutError=nt;v.APIUserAbortError=Ye;v.NotFoundError=$t;v.ConflictError=Bt;v.RateLimitError=Mt;v.BadRequestError=Vt;v.AuthenticationError=_t;v.InternalServerError=Ft;v.PermissionDeniedError=qt;v.UnprocessableEntityError=xt;(function(e){e.toFile=zt,e.fileFromPath=Wt,e.Page=Fe,e.CursorPage=rt,e.Completions=Ne,e.Chat=Ae,e.Edits=Ce,e.Embeddings=Te,e.Files=je,e.FileObjectsPage=tn,e.Images=_e,e.Audio=Re,e.Moderations=$e,e.Models=qe,e.ModelsPage=on,e.FineTuning=Ve,e.FineTunes=Le,e.FineTunesPage=nn})(v||(v={}));const ir=v,or=`
You represent an artwork by the Danish artist Sophie Dupont. The piece is about breath. Users can tell you how they feel and you will give them a response that matches their emotions.
You should respond with a breathing exercise that matches the user's emotions. Keep your response to 3-5 sentences.

Here are some examples:

User: I'm feeling very sad

Response: Imagine a color - the first that comes to you. Inhale through the nose this color bright and clear as you lift and press your belly into your hands. Do so until your fingers move away from each other and no longer touch. Exhale through your mouth now in a different color equal to the feeling of sadness, feeling your belly fall and your fingers touch again. Visualize you release your feeling together with the color and your breath.
Repeat this as many times you need until you feel a little bit or a lot brighter.

User: I feel depressed

Response: Please place your hands on your hips. Inhale and twist to the left side and exhale twist to the right side. Visualize the sun is shining on you as if you were standing in your own private sunbeam spotlight. Mentally inside yourself say LIGHT when you twist left and STAR when you twist right. Imagine the depression being shaken away and smile. 

User: I have no energy

Response: Exhale fully. Imagine you stand in the front of the ocean with your toes in the fresh water. Imagine the waves. When the waves come to the shore you take a deep inhalation though the nose letting the waves wash over you. On your exhale through the mouth visualize the waves takes away all your worries pain and suffering. Leaving you refreshed clear sighted and with a warm bright heart shining inside and for you.
`;async function lr(e){const t=localStorage.getItem("openai-token")||"",n=new ir({apiKey:t,dangerouslyAllowBrowser:!0}),r=[{content:or,role:"system"},{content:"I feel:"+e,role:"user"}];return await n.chat.completions.create({model:"gpt-3.5-turbo-0613",messages:r,stream:!0})}async function ar(e,t,n){const s=(await fetch(e,{method:"POST",headers:t,body:JSON.stringify(n)})).body.getReader(),i=new ReadableStream({async start(o){for(;;){const{done:l,value:a}=await s.read();if(l)break;o.enqueue(a)}o.close()}});return new Response(i)}async function ur(e){const t=localStorage.getItem("playht-token")||"",n=localStorage.getItem("proxy-url")||"",r={AUTHORIZATION:"Bearer "+t,"X-USER-ID":"Z79sRfVkSyP3AxwOcrfZkNPhHFq1",accept:"text/event-stream","content-type":"application/json","x-cors-headers":"X-USER-ID, AUTHORIZATION, accept, content-type",cookies:"x=123"},s={text:e,voice:"s3://voice-cloning-zero-shot/f41cbb3f-3a6b-49a4-a121-6f2255a4b7d4/sophie-2/manifest.json",voice_engine:"PlayHT2.0"},l=(await(await ar(`${n}?https://play.ht/api/v2/tts`,r,s)).text()).split(`
`),a=l[l.length-3],u=a.substring(a.indexOf("{")),d=JSON.parse(u).url;return console.log("AUDIO URL: ",d),d}function St(e){const t=new Audio(e);return t.play(),new Promise(n=>{t.onended=()=>{n()}})}let J={queue:[],isProcessing:!1},ye={isPlaying:!1};function fr(e){J.queue.push(e),J.isProcessing||an()}async function an(){for(J.isProcessing=!0;J.queue.length>0;){const e=J.queue.shift(),t=await ur(e);dr(t)}J.isProcessing=!1}function cr(e){return new Promise(t=>setTimeout(t,e))}async function dr(e){if(!ye.isPlaying){ye.isPlaying=!0;try{await St(e),await cr(3e4),await St(e),ye.isPlaying=!1,J.queue.length>0&&an()}catch(t){console.error("Error playing audio:",t),ye.isPlaying=!1}}}function hr(){return new Promise(e=>{const t=()=>{document.removeEventListener("click",t),e(0)};document.addEventListener("click",t)})}function Rt(e){return new Promise(t=>setTimeout(t,e))}async function*pr({stream:e,onProceed:t}){let n="";for await(const r of e){const s=r.choices[0].delta.content;s&&(n+=s),yield f("div",{class:"flex h-screen flex-col p-8",children:f("div",{className:"flex h-full w-full items-start justify-start",children:f("div",{className:"flex h-full w-full flex-col items-start justify-start",children:f("div",{className:"",children:n.split(" ").map(i=>f("span",{class:"enter mx-2",children:i}))})})})})}fr(n),await Rt(3e3),yield f("div",{class:"flex h-screen flex-col p-8",children:f("div",{className:"flex h-full w-full items-start justify-start",children:f("div",{className:"flex h-full w-full flex-col items-start justify-start",children:f("div",{className:"",children:n.split(" ").map(r=>f("span",{class:"breathing mx-2",children:r}))})})})}),await hr(),yield f("div",{class:"flex h-screen flex-col p-8",onclick:()=>this.refresh(),children:f("div",{className:"flex h-full w-full items-start justify-start",children:f("div",{className:"flex h-full w-full flex-col items-start justify-start",children:f("div",{className:"",children:n.split(" ").map(r=>f("span",{class:"exit mx-2",children:r}))})})})}),await Rt(3e3),t(),console.log("Response: Yielding null"),yield null}function*yr(){(!localStorage.getItem("openai-token")||!localStorage.getItem("playht-token")||!localStorage.getItem("proxy-url"))&&(setTimeout(()=>{console.log('Token not found. Redirecting to "/token"'),history.pushState({},"","/sophie-breath/token"),window.dispatchEvent(new PopStateEvent("popstate"))},100),console.log("Home: Yielding null after redirect"),yield null);let e;const t=async n=>{n.preventDefault();const r=document.getElementById("query").value;console.log("Home: refreshing before query"),await this.refresh(),console.log("Sending query"),e=await lr(r),console.log("Home: refreshing after query"),await this.refresh()};for(;;)console.log("Home: A"),yield f("div",{class:"flex h-screen flex-col",children:f("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:f("div",{className:"flex h-full w-full flex-col items-center justify-center",children:Ot("form",{onsubmit:t,className:"flex w-full flex-row items-center justify-center",children:[f("input",{id:"query",type:"text",placeholder:"How do you feel?",autofocus:!0,className:"m-2 w-full max-w-screen-md rounded-md border-2 border-gray-500 p-2"}),f("button",{type:"submit",className:"m-2 rounded-md border-2 border-gray-500 p-2",children:"Go"})]})})})}),console.log("Home: B"),yield f("div",{class:"flex h-screen flex-col",children:f("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:f("div",{className:"flex h-full w-full flex-col items-center justify-center",children:f("div",{className:"flex w-full flex-row items-center justify-center",children:f("span",{className:"breathing",children:"..."})})})})}),console.log("Home: C"),yield f(pr,{stream:e,onProceed:()=>{console.log("ON PROCEED"),this.refresh()}})}function gr(){const e=localStorage.getItem("openai-token")||"",t=localStorage.getItem("playht-token")||"",n=localStorage.getItem("proxy-url")||"";return f("div",{class:"flex h-screen flex-col",children:f("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:Ot("div",{className:"flex h-full w-full flex-col items-center justify-center",children:[f("div",{className:"flex w-full flex-row items-center justify-center",children:f("input",{type:"text",value:e,oninput:l=>{const a=l.target;localStorage.setItem("openai-token",a.value)},placeholder:"OpenAI API Token",className:"m-2 w-full max-w-screen-md rounded-md border-2 border-gray-500 p-2"})}),f("div",{className:"flex w-full flex-row items-center justify-center",children:f("input",{type:"text",value:t,oninput:l=>{const a=l.target;localStorage.setItem("playht-token",a.value)},placeholder:"PlayHT API Token",className:"m-2 w-full max-w-screen-md rounded-md border-2 border-gray-500 p-2"})}),f("div",{className:"flex w-full flex-row items-center justify-center",children:f("input",{type:"text",value:n,oninput:l=>{const a=l.target;localStorage.setItem("proxy-url",a.value)},placeholder:"Proxy URL",className:"m-2 w-full max-w-screen-md rounded-md border-2 border-gray-500 p-2"})}),f("div",{className:"flex flex-row",children:f("button",{onclick:()=>{history.pushState({},"","/sophie-breath/"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"m-2 rounded-md border-2 border-gray-500 p-2",children:"Continue"})})]})})})}const mr={"/":yr,"/token":gr};function*wr(){const e=()=>this.refresh();window.addEventListener("popstate",e);try{for(;;){const t="/sophie-breath",n=window.location.pathname.substring(t.length)||"/";console.log("Rendering: ",n);const r=mr[n];yield f("div",{class:"flex h-screen flex-col",children:f(r,{x:Math.random()})})}}finally{console.log("unmount"),window.removeEventListener("popstate",e)}}const br=()=>f(Rn,{children:f(wr,{})});(async()=>await Nn.render(f("div",{id:"root",children:f(br,{})}),document.body))();
